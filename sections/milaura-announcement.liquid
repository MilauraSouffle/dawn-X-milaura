{% style %}
  /* --- VARIABLES EFFET BIJOU --- */
  #MilauraAnnouncement-{{ section.id }} {
    --announce-gold-grad: linear-gradient(
      135deg,
      rgba(255, 240, 200, 0.95) 0%,
      rgba(240, 210, 140, 0.95) 20%,
      rgba(214, 176, 96, 0.95) 50%,
      rgba(240, 210, 140, 0.95) 80%,
      rgba(255, 240, 200, 0.95) 100%
    );
  }

  /* --- LE CONTENEUR PRINCIPAL (EFFET BIJOU) --- */
  #MilauraAnnouncement-{{ section.id }} {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: {{ section.settings.bar_height }}px;
    overflow: hidden;
    z-index: 1000001;

    /* Fond personnalisable via customizer */
    background: linear-gradient(90deg, {{ section.settings.bg_color_start }}, {{ section.settings.bg_color_end }}, {{ section.settings.bg_color_start }});

    /* Bordure dor√©e d√©grad√©e (effet bijou) */
    border-bottom: 2px solid transparent;
    background-clip: padding-box;

    /* Ombres luxueuses */
    box-shadow:
      0 2px 12px rgba(192, 160, 98, 0.15),
      0 1px 0 rgba(214, 176, 96, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.8),
      inset 0 -1px 0 rgba(214, 176, 96, 0.3);
  }

  /* Bordure dor√©e en bas avec d√©grad√© */
  #MilauraAnnouncement-{{ section.id }}::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--announce-gold-grad);
  }

  /* Compensation pour le body */
  body {
    padding-top: {{ section.settings.bar_height }}px;
  }

  @media screen and (max-width: 768px) {
    body {
      padding-top: {{ section.settings.bar_height | plus: 2 }}px;
    }
  }

  /* --- LE REFLET DOR√â (SHEEN EFFECT) --- */
  #MilauraAnnouncement-{{ section.id }}::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 200%;
    height: 100%;
    background: linear-gradient(
      120deg,
      transparent 0%,
      transparent 40%,
      rgba(255, 248, 220, 0.5) 50%,
      transparent 60%,
      transparent 100%
    );
    animation: goldSheen 4s infinite ease-in-out;
    pointer-events: none;
  }

  /* --- LE TEXTE D√âFILANT (BFM STYLE) --- */
  .marquee-container {
    display: flex;
    align-items: center;
    height: 100%;
    width: 100%;
    overflow: hidden;
  }

  .marquee-track {
    display: flex;
    align-items: center;
    white-space: nowrap;
    animation: scrollText {{ section.settings.scroll_speed }}s linear infinite;
    gap: 4rem;
    padding-left: 4rem;
  }
  
  /* Pause au survol pour laisser lire */
  .marquee-container:hover .marquee-track {
    animation-play-state: paused;
  }

  .announcement-item {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    color: {{ section.settings.text_color }};
    font-family: {{ section.settings.font_family }};
    font-weight: {{ section.settings.font_weight }};
    font-size: {{ section.settings.font_size | divided_by: 10.0 }}rem;
    text-transform: {{ section.settings.text_transform }};
    letter-spacing: 0.5px;
  }

  .announcement-icon {
    font-size: {{ section.settings.font_size | plus: 2 | divided_by: 10.0 }}rem;
  }

  .announcement-separator {
    color: #C0A062;
    font-size: 0.5rem;
    opacity: 0.7;
  }

  /* --- ANIMATIONS --- */
  @keyframes goldSheen {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }

  @keyframes scrollText {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); } /* On d√©place de 50% car on a dupliqu√© le contenu */
  }

  /* Mobile */
  @media screen and (max-width: 768px) {
    .marquee-track {
      animation-duration: {{ section.settings.scroll_speed | minus: 5 }}s;
    }
    #MilauraAnnouncement-{{ section.id }} {
      height: {{ section.settings.bar_height | plus: 2 }}px;
    }
    .announcement-item {
      font-size: {{ section.settings.font_size | minus: 1 | divided_by: 10.0 }}rem;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      transition: none !important;
      animation: none !important;
    }
  }
{% endstyle %}

<div id="MilauraAnnouncement-{{ section.id }}">
  <div class="marquee-container">
    <div class="marquee-track">
      
      {%- for block in section.blocks -%}
        <div class="announcement-item">
          {% if block.settings.icon != blank %}
            <span class="announcement-icon">{{ block.settings.icon }}</span>
          {% endif %}
          <span>{{ block.settings.text }}</span>
        </div>
        <div class="announcement-separator">‚óÜ</div>
      {%- endfor -%}

      {%- for block in section.blocks -%}
        <div class="announcement-item">
          {% if block.settings.icon != blank %}
            <span class="announcement-icon">{{ block.settings.icon }}</span>
          {% endif %}
          <span>{{ block.settings.text }}</span>
        </div>
        <div class="announcement-separator">‚óÜ</div>
      {%- endfor -%}

    </div>
  </div>
</div>

{% schema %}
{
  "name": "Milaura Announce Gold",
  "settings": [
    {
      "type": "header",
      "content": "üé® Couleurs"
    },
    {
      "type": "color",
      "id": "bg_color_start",
      "label": "Couleur fond (d√©but)",
      "default": "#C0A062"
    },
    {
      "type": "color",
      "id": "bg_color_end",
      "label": "Couleur fond (fin)",
      "default": "#E6C88B"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Couleur du texte",
      "default": "#1b1b1b"
    },
    {
      "type": "header",
      "content": "‚úèÔ∏è Typographie"
    },
    {
      "type": "select",
      "id": "font_family",
      "label": "Police",
      "options": [
        { "value": "'Lato', sans-serif", "label": "Lato (moderne)" },
        { "value": "'Playfair Display', serif", "label": "Playfair Display (√©l√©gant)" },
        { "value": "'Dancing Script', cursive", "label": "Dancing Script (cursif)" }
      ],
      "default": "'Lato', sans-serif"
    },
    {
      "type": "range",
      "id": "font_size",
      "label": "Taille du texte",
      "min": 8,
      "max": 14,
      "step": 1,
      "unit": "px",
      "default": 11,
      "info": "Valeur en dixi√®mes de rem (11 = 1.1rem)"
    },
    {
      "type": "select",
      "id": "font_weight",
      "label": "√âpaisseur",
      "options": [
        { "value": "400", "label": "Normal" },
        { "value": "600", "label": "Semi-gras" },
        { "value": "700", "label": "Gras" },
        { "value": "800", "label": "Extra-gras" }
      ],
      "default": "700"
    },
    {
      "type": "select",
      "id": "text_transform",
      "label": "Style du texte",
      "options": [
        { "value": "uppercase", "label": "MAJUSCULES" },
        { "value": "capitalize", "label": "Premi√®re Lettre" },
        { "value": "none", "label": "Normal" }
      ],
      "default": "uppercase"
    },
    {
      "type": "header",
      "content": "‚öôÔ∏è Param√®tres"
    },
    {
      "type": "range",
      "id": "bar_height",
      "label": "Hauteur de la barre",
      "min": 30,
      "max": 50,
      "step": 2,
      "unit": "px",
      "default": 38
    },
    {
      "type": "range",
      "id": "scroll_speed",
      "label": "Vitesse de d√©filement",
      "min": 10,
      "max": 40,
      "step": 2,
      "unit": "s",
      "default": 20,
      "info": "Plus petit = plus rapide"
    }
  ],
  "blocks": [
    {
      "type": "announcement",
      "name": "Message",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Message",
          "default": "Bienvenue chez Mil'Aura"
        },
        {
          "type": "text",
          "id": "icon",
          "label": "Emoji/Ic√¥ne",
          "default": "üì¶",
          "info": "Copiez-collez un emoji ici (ex: üá´üá∑, üíé, üì¶)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Milaura Announce Gold",
      "blocks": [
        {
          "type": "announcement",
          "settings": {
            "text": "Livraison offerte d√®s 39 ‚Ç¨",
            "icon": "üì¶"
          }
        },
        {
          "type": "announcement",
          "settings": {
            "text": "Chaque commande pr√©par√©e avec soin en France",
            "icon": "üá´üá∑"
          }
        },
        {
          "type": "announcement",
          "settings": {
            "text": "Pierres certifi√©es",
            "icon": "üíé"
          }
        }
      ]
    }
  ]
}
{% endschema %}