{% style %}
  /* --- LE CONTENEUR PRINCIPAL (OR) --- */
  #MilauraAnnouncement-{{ section.id }} {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: {{ section.settings.bar_height }}px;
    overflow: hidden;
    background: linear-gradient(90deg, {{ section.settings.bg_color_start }}, {{ section.settings.bg_color_end }}, {{ section.settings.bg_color_start }});
    z-index: 1000001;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }
  
  /* Compensation pour le body */
  body {
    padding-top: {{ section.settings.bar_height }}px;
  }

  @media screen and (max-width: 768px) {
    body {
      padding-top: {{ section.settings.bar_height | plus: 2 }}px;
    }
  }

  /* --- LE BROUILLARD ARGENT√â (SHIMMER) --- */
  #MilauraAnnouncement-{{ section.id }}::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 200%;
    height: 100%;
    /* Le voile argent√© : Transparent -> Blanc l√©ger -> Transparent */
    background: linear-gradient(
      110deg, 
      transparent 30%, 
      rgba(255, 255, 255, 0.4) 50%, 
      transparent 70%
    );
    animation: silverFog 3s infinite linear; /* Animation rapide et constante */
    pointer-events: none;
    mix-blend-mode: overlay; /* Fusionne joliment avec l'or */
  }

  /* --- LE TEXTE D√âFILANT (BFM STYLE) --- */
  .marquee-container {
    display: flex;
    align-items: center;
    height: 100%;
    width: 100%;
    overflow: hidden;
  }

  .marquee-track {
    display: flex;
    align-items: center;
    white-space: nowrap;
    animation: scrollText {{ section.settings.scroll_speed }}s linear infinite;
    gap: 4rem;
    padding-left: 4rem;
  }
  
  /* Pause au survol pour laisser lire */
  .marquee-container:hover .marquee-track {
    animation-play-state: paused;
  }

  .announcement-item {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    color: {{ section.settings.text_color }};
    font-family: {{ section.settings.font_family }};
    font-weight: {{ section.settings.font_weight }};
    font-size: {{ section.settings.font_size }}rem;
    text-transform: {{ section.settings.text_transform }};
    letter-spacing: 1px;
    text-shadow: 0 1px 2px rgba(0,0,0,0.1);
  }

  .announcement-icon {
    font-size: {{ section.settings.font_size | plus: 0.2 }}rem;
  }

  /* --- ANIMATIONS --- */
  @keyframes silverFog {
    0% { transform: translateX(-150%); }
    100% { transform: translateX(50%); }
  }

  @keyframes scrollText {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); } /* On d√©place de 50% car on a dupliqu√© le contenu */
  }

  /* Mobile */
  @media screen and (max-width: 768px) {
    .marquee-track {
      animation-duration: {{ section.settings.scroll_speed | minus: 5 }}s;
    }
    #MilauraAnnouncement-{{ section.id }} {
      height: {{ section.settings.bar_height | plus: 2 }}px;
    }
    .announcement-item {
      font-size: {{ section.settings.font_size | minus: 0.1 }}rem;
    }
  }
{% endstyle %}

<div id="MilauraAnnouncement-{{ section.id }}">
  <div class="marquee-container">
    <div class="marquee-track">
      
      {%- for block in section.blocks -%}
        <div class="announcement-item">
          {% if block.settings.icon != blank %}
            <span class="announcement-icon">{{ block.settings.icon }}</span>
          {% endif %}
          <span>{{ block.settings.text }}</span>
        </div>
        <div class="announcement-item">‚Ä¢</div> 
      {%- endfor -%}

      {%- for block in section.blocks -%}
        <div class="announcement-item">
          {% if block.settings.icon != blank %}
            <span class="announcement-icon">{{ block.settings.icon }}</span>
          {% endif %}
          <span>{{ block.settings.text }}</span>
        </div>
        <div class="announcement-item">‚Ä¢</div>
      {%- endfor -%}

    </div>
  </div>
</div>

{% schema %}
{
  "name": "Milaura Announce Gold",
  "settings": [
    {
      "type": "header",
      "content": "üé® Couleurs"
    },
    {
      "type": "color",
      "id": "bg_color_start",
      "label": "Couleur fond (d√©but)",
      "default": "#C0A062"
    },
    {
      "type": "color",
      "id": "bg_color_end",
      "label": "Couleur fond (fin)",
      "default": "#E6C88B"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Couleur du texte",
      "default": "#FFFFFF"
    },
    {
      "type": "header",
      "content": "‚úèÔ∏è Typographie"
    },
    {
      "type": "select",
      "id": "font_family",
      "label": "Police",
      "options": [
        { "value": "'Lato', sans-serif", "label": "Lato (moderne)" },
        { "value": "'Playfair Display', serif", "label": "Playfair Display (√©l√©gant)" },
        { "value": "'Dancing Script', cursive", "label": "Dancing Script (cursif)" }
      ],
      "default": "'Lato', sans-serif"
    },
    {
      "type": "range",
      "id": "font_size",
      "label": "Taille du texte",
      "min": 0.7,
      "max": 1.2,
      "step": 0.05,
      "unit": "rem",
      "default": 0.9
    },
    {
      "type": "select",
      "id": "font_weight",
      "label": "√âpaisseur",
      "options": [
        { "value": "400", "label": "Normal" },
        { "value": "600", "label": "Semi-gras" },
        { "value": "700", "label": "Gras" },
        { "value": "800", "label": "Extra-gras" }
      ],
      "default": "700"
    },
    {
      "type": "select",
      "id": "text_transform",
      "label": "Style du texte",
      "options": [
        { "value": "uppercase", "label": "MAJUSCULES" },
        { "value": "capitalize", "label": "Premi√®re Lettre" },
        { "value": "none", "label": "Normal" }
      ],
      "default": "uppercase"
    },
    {
      "type": "header",
      "content": "‚öôÔ∏è Param√®tres"
    },
    {
      "type": "range",
      "id": "bar_height",
      "label": "Hauteur de la barre",
      "min": 30,
      "max": 50,
      "step": 2,
      "unit": "px",
      "default": 38
    },
    {
      "type": "range",
      "id": "scroll_speed",
      "label": "Vitesse de d√©filement",
      "min": 10,
      "max": 40,
      "step": 2,
      "unit": "s",
      "default": 20,
      "info": "Plus petit = plus rapide"
    }
  ],
  "blocks": [
    {
      "type": "announcement",
      "name": "Message",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Message",
          "default": "Bienvenue chez Mil'Aura"
        },
        {
          "type": "text",
          "id": "icon",
          "label": "Emoji/Ic√¥ne",
          "default": "‚ú®",
          "info": "Copiez-collez un emoji ici (ex: üá´üá∑, üíé, üì¶)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Milaura Announce Gold",
      "blocks": [
        {
          "type": "announcement",
          "settings": {
            "text": "Livraison offerte d√®s 39 ‚Ç¨",
            "icon": "‚ú®"
          }
        },
        {
          "type": "announcement",
          "settings": {
            "text": "Chaque commande pr√©par√©e avec soin en France",
            "icon": "üá´üá∑"
          }
        },
        {
          "type": "announcement",
          "settings": {
            "text": "Pierres certifi√©es",
            "icon": "üíé"
          }
        }
      ]
    }
  ]
}
{% endschema %}