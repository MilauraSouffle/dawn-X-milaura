{% style %}
  /* ============================================
     MILAURA HERO SHOWCASE - LUXE & NAVIGATION DIRECTE
     ============================================ */

  #MilauraHeroShowcase-{{ section.id }} {
    width: 100%;
    padding-top: var(--header-height-offset, 120px);
    padding-bottom: var(--milaura-spacing-lg);
    background: transparent;
  }

  /* --- HEADER DE SECTION (Full Width) --- */
  #MilauraHeroShowcase-{{ section.id }} .hero-header {
    text-align: center;
    margin-bottom: var(--milaura-spacing-xl);
    padding: 0 var(--milaura-spacing-md);
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-kicker {
    font-family: var(--milaura-font-body);
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--milaura-gold);
    font-weight: 600;
    margin-bottom: var(--milaura-spacing-sm);
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-title {
    font-family: var(--milaura-font-script, var(--milaura-font-heading));
    font-size: 4.5rem;
    font-weight: 600;
    color: var(--milaura-gold);
    line-height: 1.1;
    margin: 0 0 var(--milaura-spacing-md) 0;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-subtitle {
    font-family: var(--milaura-font-body);
    font-size: 1.2rem;
    color: var(--milaura-text-light);
    line-height: 1.6;
    max-width: 800px;
    margin: 0 auto;
  }

  /* --- CONTENEUR PRINCIPAL --- */
  #MilauraHeroShowcase-{{ section.id }} .hero-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 var(--milaura-spacing-md);
  }

  /* --- GRILLE PRINCIPALE (40% / 60%) --- */
  #MilauraHeroShowcase-{{ section.id }} .hero-grid {
    display: grid;
    grid-template-columns: 40% 60%;
    gap: var(--milaura-spacing-xl);
    align-items: start;
  }

  /* --- COLONNE GAUCHE (NAVIGATION - PILIERS) --- */
  #MilauraHeroShowcase-{{ section.id }} .hero-pillars {
    display: flex;
    flex-direction: column;
    gap: var(--milaura-spacing-md);
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar {
    display: flex;
    align-items: center;
    gap: var(--milaura-spacing-md);
    padding: var(--milaura-spacing-md) var(--milaura-spacing-lg);
    border-radius: var(--milaura-border-radius);
    background: rgba(255, 255, 255, 0.7);
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    text-decoration: none;
    cursor: pointer;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar:hover {
    background: rgba(255, 255, 255, 0.9);
    border-color: var(--milaura-gold);
    box-shadow: 0 15px 40px rgba(192, 160, 98, 0.25);
    transform: translateY(-4px);
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-icon {
    font-size: 2.2rem;
    line-height: 1;
    flex-shrink: 0;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-content {
    flex: 1;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-title {
    font-family: var(--milaura-font-heading);
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--milaura-text);
    margin-bottom: 4px;
    display: block;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-text {
    font-family: var(--milaura-font-body);
    font-size: 1rem;
    color: var(--milaura-text-light);
    line-height: 1.5;
    display: block;
  }

  /* --- COLONNE DROITE (CARROUSEL) --- */
  #MilauraHeroShowcase-{{ section.id }} .hero-carousel-wrapper {
    position: relative;
    border-radius: var(--milaura-border-radius);
    overflow: visible;
  }

  /* Effet cadre dor√© d√©cal√© */
  #MilauraHeroShowcase-{{ section.id }} .hero-carousel-frame {
    position: relative;
    border: 3px solid var(--milaura-gold);
    border-radius: var(--milaura-border-radius);
    padding: 8px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    box-shadow: var(--milaura-shadow-md);
    transform: translate(8px, 8px);
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-carousel {
    position: relative;
    width: 100%;
    aspect-ratio: 16 / 9;
    border-radius: calc(var(--milaura-border-radius) - 4px);
    overflow: hidden;
    background: var(--milaura-beige);
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 0.8s ease-in-out;
    border-radius: calc(var(--milaura-border-radius) - 4px);
    overflow: hidden;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-slide.is-active {
    opacity: 1;
    z-index: 1;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: calc(var(--milaura-border-radius) - 4px);
  }

  /* Si une seule slide, pas de carrousel */
  #MilauraHeroShowcase-{{ section.id }} .hero-carousel:has(.hero-slide:only-child) .hero-slide {
    position: relative;
    opacity: 1;
  }

  /* --- MOBILE (< 768px) --- */
  @media screen and (max-width: 768px) {
    #MilauraHeroShowcase-{{ section.id }} {
      padding-top: var(--header-height-offset, 100px);
      padding-bottom: var(--milaura-spacing-md);
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-header {
      margin-bottom: var(--milaura-spacing-lg);
      padding: 0 var(--milaura-spacing-sm);
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-title {
      font-size: 3rem;
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-subtitle {
      font-size: 1rem;
      max-width: 100%;
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-container {
      padding: 0 var(--milaura-spacing-sm);
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-grid {
      grid-template-columns: 1fr;
      gap: var(--milaura-spacing-lg);
    }

    /* Ordre mobile : Titre -> Carrousel -> Piliers */
    #MilauraHeroShowcase-{{ section.id }} .hero-header {
      order: 1;
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-carousel-wrapper {
      order: 2;
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-pillars {
      order: 3;
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-pillar {
      padding: var(--milaura-spacing-sm) var(--milaura-spacing-md);
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-pillar-icon {
      font-size: 1.8rem;
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-pillar-title {
      font-size: 1.2rem;
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-pillar-text {
      font-size: 0.9rem;
    }

    /* R√©duire l'offset du cadre dor√© sur mobile */
    #MilauraHeroShowcase-{{ section.id }} .hero-carousel-frame {
      transform: translate(4px, 4px);
      padding: 6px;
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-carousel {
      aspect-ratio: 4 / 3;
    }
  }
{% endstyle %}

<div id="MilauraHeroShowcase-{{ section.id }}">
  <!-- HEADER DE SECTION (Full Width) -->
  <div class="hero-header">
    {% if section.settings.kicker != blank %}
      <div class="hero-kicker">{{ section.settings.kicker }}</div>
    {% endif %}

    {% if section.settings.title != blank %}
      <h1 class="hero-title milaura-heading-script">{{ section.settings.title }}</h1>
    {% endif %}

    {% if section.settings.subtitle != blank %}
      <p class="hero-subtitle milaura-text">{{ section.settings.subtitle }}</p>
    {% endif %}
  </div>

  <!-- CONTENEUR PRINCIPAL -->
  <div class="hero-container">
    <div class="hero-grid">
      <!-- COLONNE GAUCHE : NAVIGATION (PILIERS) -->
      <div class="hero-pillars">
        {% if section.settings.pillar_1_title != blank and section.settings.pillar_1_link != blank %}
          <a href="{{ section.settings.pillar_1_link }}" class="hero-pillar">
            {% if section.settings.pillar_1_icon != blank %}
              <div class="hero-pillar-icon">{{ section.settings.pillar_1_icon }}</div>
            {% endif %}
            <div class="hero-pillar-content">
              <div class="hero-pillar-title">{{ section.settings.pillar_1_title }}</div>
              {% if section.settings.pillar_1_text != blank %}
                <div class="hero-pillar-text milaura-text">{{ section.settings.pillar_1_text }}</div>
              {% endif %}
            </div>
          </a>
        {% endif %}

        {% if section.settings.pillar_2_title != blank and section.settings.pillar_2_link != blank %}
          <a href="{{ section.settings.pillar_2_link }}" class="hero-pillar">
            {% if section.settings.pillar_2_icon != blank %}
              <div class="hero-pillar-icon">{{ section.settings.pillar_2_icon }}</div>
            {% endif %}
            <div class="hero-pillar-content">
              <div class="hero-pillar-title">{{ section.settings.pillar_2_title }}</div>
              {% if section.settings.pillar_2_text != blank %}
                <div class="hero-pillar-text milaura-text">{{ section.settings.pillar_2_text }}</div>
              {% endif %}
            </div>
          </a>
        {% endif %}

        {% if section.settings.pillar_3_title != blank and section.settings.pillar_3_link != blank %}
          <a href="{{ section.settings.pillar_3_link }}" class="hero-pillar">
            {% if section.settings.pillar_3_icon != blank %}
              <div class="hero-pillar-icon">{{ section.settings.pillar_3_icon }}</div>
            {% endif %}
            <div class="hero-pillar-content">
              <div class="hero-pillar-title">{{ section.settings.pillar_3_title }}</div>
              {% if section.settings.pillar_3_text != blank %}
                <div class="hero-pillar-text milaura-text">{{ section.settings.pillar_3_text }}</div>
              {% endif %}
            </div>
          </a>
        {% endif %}
      </div>

      <!-- COLONNE DROITE : CARROUSEL -->
      <div class="hero-carousel-wrapper">
        <div class="hero-carousel-frame">
          <div class="hero-carousel" id="hero-carousel-{{ section.id }}">
            {% for block in section.blocks %}
              {% if block.type == 'slide' and block.settings.image != blank %}
                <div
                  class="hero-slide {% if forloop.first %}is-active{% endif %}"
                  data-slide-index="{{ forloop.index0 }}"
                >
                  {{
                    block.settings.image
                    | image_url: width: 1200
                    | image_tag: loading: 'eager', alt: block.settings.image.alt
                    | default: 'Milaura'
                  }}
                </div>
              {% endif %}
            {% endfor %}

            {% comment %} Fallback si aucune image {% endcomment %}
            {% if section.blocks.size == 0 %}
              <div class="hero-slide is-active">
                {{ 'image' | placeholder_svg_tag: 'hero-placeholder' }}
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  (function () {
    const sectionId = '{{ section.id }}';
    const carousel = document.getElementById('hero-carousel-' + sectionId);

    if (!carousel) return;

    const slides = carousel.querySelectorAll('.hero-slide');

    // Si une seule slide ou aucune, pas de carrousel
    if (slides.length <= 1) return;

    let currentIndex = 0;
    const totalSlides = slides.length;
    const intervalDuration = 4000; // 4 secondes
    let intervalId = null;

    function showSlide(index) {
      // Retirer la classe active de toutes les slides
      slides.forEach((slide) => slide.classList.remove('is-active'));

      // Ajouter la classe active √† la slide courante
      if (slides[index]) {
        slides[index].classList.add('is-active');
      }
    }

    function nextSlide() {
      currentIndex = (currentIndex + 1) % totalSlides;
      showSlide(currentIndex);
    }

    function startCarousel() {
      if (intervalId) clearInterval(intervalId);
      intervalId = setInterval(nextSlide, intervalDuration);
    }

    function stopCarousel() {
      if (intervalId) {
        clearInterval(intervalId);
        intervalId = null;
      }
    }

    // Initialiser la premi√®re slide
    showSlide(0);

    // D√©marrer le carrousel automatique
    startCarousel();

    // Pause au survol (optionnel, pour meilleure UX)
    carousel.addEventListener('mouseenter', stopCarousel);
    carousel.addEventListener('mouseleave', startCarousel);
  })();
</script>

{% schema %}
{
  "name": "Milaura Hero Showcase",
  "tag": "section",
  "class": "section",
  "enabled_on": {
    "templates": ["*"]
  },
  "settings": [
    {
      "type": "header",
      "content": "Header"
    },
    {
      "type": "text",
      "id": "kicker",
      "label": "Kicker (Sur-titre)",
      "default": "D√©couvrez"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Titre principal",
      "default": "Votre univers √©nerg√©tique"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Sous-titre descriptif",
      "default": "Pierres pr√©cieuses, bijoux uniques et rituels pour √©lever votre √©nergie"
    },
    {
      "type": "header",
      "content": "Pilier 1"
    },
    {
      "type": "text",
      "id": "pillar_1_icon",
      "label": "Ic√¥ne (Emoji)",
      "default": "üíé"
    },
    {
      "type": "text",
      "id": "pillar_1_title",
      "label": "Titre",
      "default": "Pierres"
    },
    {
      "type": "text",
      "id": "pillar_1_text",
      "label": "Texte",
      "default": "S√©lection de pierres naturelles"
    },
    {
      "type": "url",
      "id": "pillar_1_link",
      "label": "Lien"
    },
    {
      "type": "header",
      "content": "Pilier 2"
    },
    {
      "type": "text",
      "id": "pillar_2_icon",
      "label": "Ic√¥ne (Emoji)",
      "default": "‚ú®"
    },
    {
      "type": "text",
      "id": "pillar_2_title",
      "label": "Titre",
      "default": "Bijoux"
    },
    {
      "type": "text",
      "id": "pillar_2_text",
      "label": "Texte",
      "default": "Cr√©ations artisanales uniques"
    },
    {
      "type": "url",
      "id": "pillar_2_link",
      "label": "Lien"
    },
    {
      "type": "header",
      "content": "Pilier 3"
    },
    {
      "type": "text",
      "id": "pillar_3_icon",
      "label": "Ic√¥ne (Emoji)",
      "default": "üïØÔ∏è"
    },
    {
      "type": "text",
      "id": "pillar_3_title",
      "label": "Titre",
      "default": "Rituels"
    },
    {
      "type": "text",
      "id": "pillar_3_text",
      "label": "Texte",
      "default": "Exp√©riences √©nerg√©tiques"
    },
    {
      "type": "url",
      "id": "pillar_3_link",
      "label": "Lien"
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Milaura Hero Showcase",
      "blocks": [
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        }
      ]
    }
  ]
}
{% endschema %}
