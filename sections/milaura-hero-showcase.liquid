{% style %}
  /* ============================================
     MILAURA HERO SHOWCASE - LUXE & CONVERSION
     ============================================ */

  #MilauraHeroShowcase-{{ section.id }} {
    width: 100%;
    padding-top: var(--header-height-offset, 120px);
    padding-bottom: var(--milaura-spacing-lg);
    background: transparent;
    /* Espacement vertical harmonis√© */
    margin-top: var(--milaura-spacing-lg);
    margin-bottom: var(--milaura-spacing-lg);
  }

  /* --- CONTENEUR PRINCIPAL AVEC HALO --- */
  #MilauraHeroShowcase-{{ section.id }} .hero-card {
    /* Utilise la classe g√©n√©rique .milaura-section-card */
    /* max-width, width, margin, background, border, box-shadow g√©r√©s par .milaura-section-card */
  }

  /* --- HEADER FULL-WIDTH --- */
  #MilauraHeroShowcase-{{ section.id }} .hero-header {
    text-align: center;
    margin-bottom: var(--milaura-spacing-lg);
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-kicker {
    font-family: var(--milaura-font-body);
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--milaura-gold);
    font-weight: 600;
    margin-bottom: var(--milaura-spacing-sm);
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-title-script {
    font-family: var(--milaura-font-script, 'Dancing Script', cursive);
    font-size: 4rem;
    font-weight: 600;
    color: var(--milaura-gold);
    line-height: 1.1;
    margin: 0;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-subtitle {
    font-family: var(--milaura-font-body);
    font-size: 1.1rem;
    color: var(--milaura-text-light);
    line-height: 1.6;
    max-width: 800px;
    margin: var(--milaura-spacing-sm) auto 0 auto;
    text-align: center;
  }

  /* --- GRILLE PRINCIPALE --- */
  #MilauraHeroShowcase-{{ section.id }} .hero-main-grid {
    max-width: 1200px;
    margin: var(--milaura-spacing-lg) auto 0 auto;
    display: grid;
    grid-template-columns: 40% 60%;
    gap: var(--milaura-spacing-lg);
    align-items: start;
  }

  /* --- COLONNE GAUCHE : PILIERS --- */
  #MilauraHeroShowcase-{{ section.id }} .hero-pillars {
    display: flex;
    flex-direction: column;
    gap: var(--milaura-spacing-md);
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-card {
    display: flex;
    align-items: center;
    gap: var(--milaura-spacing-md);
    padding: var(--milaura-spacing-md) var(--milaura-spacing-lg);
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    border: 2px solid rgba(192, 160, 98, 0.3);
    border-radius: var(--milaura-border-radius);
    box-shadow:
      0 8px 25px rgba(192, 160, 98, 0.15),
      0 0 0 1px rgba(255, 255, 255, 0.5) inset;
    transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    text-decoration: none;
    cursor: pointer;
    position: relative;
    overflow: hidden;
  }

  /* Effet de brillance au survol */
  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.4),
      transparent
    );
    transition: left 0.5s ease;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-card:hover::before {
    left: 100%;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-card:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow:
      0 20px 50px rgba(192, 160, 98, 0.3),
      0 0 0 1px rgba(255, 255, 255, 0.8) inset,
      0 0 30px rgba(192, 160, 98, 0.2);
    border-color: var(--milaura-gold);
    background: rgba(255, 255, 255, 1);
  }

  /* Indicateur de clic (fl√®che) */
  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-card::after {
    content: '‚Üí';
    position: absolute;
    right: var(--milaura-spacing-md);
    top: 50%;
    transform: translateY(-50%) translateX(-10px);
    font-size: 1.5rem;
    color: var(--milaura-gold);
    opacity: 0;
    transition: all 0.3s ease;
    font-weight: 300;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-card:hover::after {
    opacity: 1;
    transform: translateY(-50%) translateX(0);
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-icon {
    font-size: 2rem;
    line-height: 1;
    flex-shrink: 0;
    transition: transform 0.3s ease;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-card:hover .hero-pillar-icon {
    transform: scale(1.15) rotate(5deg);
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-content {
    flex: 1;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-title {
    font-family: var(--milaura-font-heading);
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--milaura-text);
    margin-bottom: 6px;
    display: block;
    transition: color 0.3s ease;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-card:hover .hero-pillar-title {
    color: var(--milaura-gold);
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-text {
    font-family: var(--milaura-font-body);
    font-size: 1rem;
    color: var(--milaura-text-light);
    line-height: 1.6;
    display: block;
    transition: color 0.3s ease;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-pillar-card:hover .hero-pillar-text {
    color: var(--milaura-text);
  }

  /* --- COLONNE DROITE : CARROUSEL --- */
  #MilauraHeroShowcase-{{ section.id }} .hero-carousel-wrapper {
    position: relative;
    border-radius: var(--milaura-border-radius);
    overflow: visible;
  }

  /* Effet cadre dor√© d√©cal√© */
  #MilauraHeroShowcase-{{ section.id }} .hero-carousel-frame {
    position: relative;
    border: 3px solid var(--milaura-gold);
    border-radius: var(--milaura-border-radius);
    padding: 8px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    box-shadow: var(--milaura-shadow-md);
    transform: translate(8px, 8px);
    /* S'assurer que le transform ne cause pas de d√©bordement */
    margin-right: 8px;
    margin-bottom: 8px;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-carousel {
    position: relative;
    width: 100%;
    aspect-ratio: 4 / 3;
    border-radius: calc(var(--milaura-border-radius) - 4px);
    overflow: hidden;
    background: var(--milaura-beige);
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 0.8s ease-in-out;
    border-radius: calc(var(--milaura-border-radius) - 4px);
    overflow: hidden;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-slide.is-active {
    opacity: 1;
    z-index: 1;
  }

  #MilauraHeroShowcase-{{ section.id }} .hero-slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: calc(var(--milaura-border-radius) - 4px);
  }

  /* Si une seule slide, pas de carrousel */
  #MilauraHeroShowcase-{{ section.id }} .hero-carousel:has(.hero-slide:only-child) .hero-slide {
    position: relative;
    opacity: 1;
  }

  /* --- MOBILE (< 768px) --- */
  @media screen and (max-width: 768px) {
    /* Wrapper principal : position relative pour le positionnement absolu du carrousel */
    #MilauraHeroShowcase-{{ section.id }} {
      padding-top: var(--header-height-offset, 100px);
      padding-bottom: 0;
      position: relative;
      min-height: 70vh;
      overflow: hidden;
    }

    /* Conteneur hero-card : retirer le padding et background pour mobile */
    #MilauraHeroShowcase-{{ section.id }} .hero-card {
      background: transparent;
      backdrop-filter: none;
      -webkit-backdrop-filter: none;
      border: none;
      box-shadow: none;
      padding: 0;
      border-radius: 0;
      max-width: 100%;
      width: 100%;
      margin: 0;
    }

    /* Header : reste au-dessus, taille r√©duite */
    #MilauraHeroShowcase-{{ section.id }} .hero-header {
      position: relative;
      z-index: 10;
      text-align: center;
      margin-bottom: 0;
      padding: var(--milaura-spacing-md) var(--milaura-spacing-sm);
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: var(--milaura-border-radius);
      margin: var(--milaura-spacing-sm);
      box-shadow: 0 10px 30px rgba(192, 160, 98, 0.2);
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-title-script {
      font-size: 2.4rem;
      color: var(--milaura-gold);
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-subtitle {
      font-size: 1rem;
      max-width: 100%;
      padding: 0;
      color: var(--milaura-text);
    }

    /* Grille principale : devient un conteneur relatif avec flexbox */
    #MilauraHeroShowcase-{{ section.id }} .hero-main-grid {
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      margin: 0;
      padding: 0;
      min-height: 70vh;
    }

    /* CARROUSEL EN FOND (position absolute) */
    #MilauraHeroShowcase-{{ section.id }} .hero-carousel-wrapper {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
      border-radius: 0;
    }

    /* Retirer le cadre dor√© sur mobile */
    #MilauraHeroShowcase-{{ section.id }} .hero-carousel-frame {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      padding: 0;
      margin: 0;
      transform: none;
      background: transparent;
      backdrop-filter: none;
      box-shadow: none;
      border-radius: 0;
    }

    /* Carrousel : occupe toute la hauteur */
    #MilauraHeroShowcase-{{ section.id }} .hero-carousel {
      width: 100%;
      height: 100%;
      aspect-ratio: unset;
      border-radius: 0;
    }

    /* Overlay pour lisibilit√© (d√©grad√© sombre en bas) */
    #MilauraHeroShowcase-{{ section.id }} .hero-carousel-wrapper::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 50%;
      background: linear-gradient(
        to top,
        rgba(253, 251, 247, 0.95) 0%,
        rgba(253, 251, 247, 0.85) 40%,
        rgba(253, 251, 247, 0.5) 70%,
        transparent 100%
      );
      z-index: 2;
      pointer-events: none;
    }

    /* PILIERS : positionn√©s par-dessus le carrousel */
    #MilauraHeroShowcase-{{ section.id }} .hero-pillars {
      position: relative;
      z-index: 10;
      display: flex;
      flex-direction: column;
      gap: var(--milaura-spacing-sm);
      padding: var(--milaura-spacing-md) var(--milaura-spacing-sm) var(--milaura-spacing-lg);
      margin-top: 0;
      pointer-events: auto; /* Assurer que les clics fonctionnent */
    }

    /* Cartes piliers : style glassmorphism renforc√© pour lisibilit√© */
    #MilauraHeroShowcase-{{ section.id }} .hero-pillar-card {
      padding: var(--milaura-spacing-md) var(--milaura-spacing-lg);
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 2px solid rgba(192, 160, 98, 0.4);
      border-radius: var(--milaura-border-radius);
      box-shadow: 
        0 10px 30px rgba(192, 160, 98, 0.25),
        0 0 0 1px rgba(255, 255, 255, 0.8) inset;
      max-width: 90%;
      margin: 0 auto;
      width: 100%;
      transition: all 0.3s ease;
    }

    /* Effet au tap sur mobile */
    #MilauraHeroShowcase-{{ section.id }} .hero-pillar-card:active {
      transform: translateY(-2px) scale(0.98);
      box-shadow: 
        0 15px 40px rgba(192, 160, 98, 0.35),
        0 0 0 1px rgba(255, 255, 255, 1) inset;
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-pillar-card::after {
      display: none; /* Masquer la fl√®che sur mobile */
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-pillar-icon {
      font-size: 1.4rem;
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-pillar-title {
      font-size: 1.1rem;
    }

    #MilauraHeroShowcase-{{ section.id }} .hero-pillar-text {
      font-size: 0.9rem;
    }
  }
{% endstyle %}

<div id="MilauraHeroShowcase-{{ section.id }}">
  <div class="hero-card milaura-section-card">
    <!-- HEADER FULL-WIDTH -->
    <div class="hero-header">
      {% if section.settings.kicker != blank %}
        <div class="hero-kicker">{{ section.settings.kicker }}</div>
      {% endif %}

      {% if section.settings.title != blank %}
        <h1 class="hero-title-script">{{ section.settings.title }}</h1>
      {% endif %}

      {% if section.settings.subtitle != blank %}
        <p class="hero-subtitle milaura-text">{{ section.settings.subtitle }}</p>
      {% endif %}
    </div>

    <!-- GRILLE PRINCIPALE -->
    <div class="hero-main-grid">
      <!-- COLONNE GAUCHE : PILIERS -->
      <div class="hero-pillars">
        {% if section.settings.pillar_1_title != blank %}
          <a
            href="{% if section.settings.pillar_1_link != blank %}{{ section.settings.pillar_1_link }}{% else %}#{% endif %}"
            class="hero-pillar-card"
          >
            {% if section.settings.pillar_1_icon != blank %}
              <div class="hero-pillar-icon">{{ section.settings.pillar_1_icon }}</div>
            {% endif %}
            <div class="hero-pillar-content">
              <div class="hero-pillar-title">{{ section.settings.pillar_1_title }}</div>
              {% if section.settings.pillar_1_text != blank %}
                <div class="hero-pillar-text milaura-text">{{ section.settings.pillar_1_text }}</div>
              {% endif %}
            </div>
          </a>
        {% endif %}

        {% if section.settings.pillar_2_title != blank %}
          <a
            href="{% if section.settings.pillar_2_link != blank %}{{ section.settings.pillar_2_link }}{% else %}#{% endif %}"
            class="hero-pillar-card"
          >
            {% if section.settings.pillar_2_icon != blank %}
              <div class="hero-pillar-icon">{{ section.settings.pillar_2_icon }}</div>
            {% endif %}
            <div class="hero-pillar-content">
              <div class="hero-pillar-title">{{ section.settings.pillar_2_title }}</div>
              {% if section.settings.pillar_2_text != blank %}
                <div class="hero-pillar-text milaura-text">{{ section.settings.pillar_2_text }}</div>
              {% endif %}
            </div>
          </a>
        {% endif %}

        {% if section.settings.pillar_3_title != blank %}
          <a
            href="{% if section.settings.pillar_3_link != blank %}{{ section.settings.pillar_3_link }}{% else %}#{% endif %}"
            class="hero-pillar-card"
          >
            {% if section.settings.pillar_3_icon != blank %}
              <div class="hero-pillar-icon">{{ section.settings.pillar_3_icon }}</div>
            {% endif %}
            <div class="hero-pillar-content">
              <div class="hero-pillar-title">{{ section.settings.pillar_3_title }}</div>
              {% if section.settings.pillar_3_text != blank %}
                <div class="hero-pillar-text milaura-text">{{ section.settings.pillar_3_text }}</div>
              {% endif %}
            </div>
          </a>
        {% endif %}
      </div>

      <!-- COLONNE DROITE : CARROUSEL -->
      <div class="hero-carousel-wrapper">
        <div class="hero-carousel-frame">
          <div class="hero-carousel" id="hero-carousel-{{ section.id }}">
            {% for block in section.blocks %}
              {% if block.type == 'slide' and block.settings.image != blank %}
                <div
                  class="hero-slide {% if forloop.first %}is-active{% endif %}"
                  data-slide-index="{{ forloop.index0 }}"
                >
                  {{
                    block.settings.image
                    | image_url: width: 1200
                    | image_tag: loading: 'eager', alt: block.settings.image.alt
                    | default: 'Milaura'
                  }}
                </div>
              {% endif %}
            {% endfor %}

            {% comment %} Fallback si aucune image {% endcomment %}
            {% if section.blocks.size == 0 %}
              <div class="hero-slide is-active">
                {{ 'image' | placeholder_svg_tag: 'hero-placeholder' }}
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  (function () {
    const sectionId = '{{ section.id }}';
    const carousel = document.getElementById('hero-carousel-' + sectionId);

    if (!carousel) return;

    const slides = carousel.querySelectorAll('.hero-slide');

    // Si une seule slide ou aucune, pas de carrousel
    if (slides.length <= 1) return;

    let currentIndex = 0;
    const totalSlides = slides.length;
    const intervalDuration = 4000; // 4 secondes
    let intervalId = null;

    function showSlide(index) {
      // Retirer la classe active de toutes les slides
      slides.forEach((slide) => slide.classList.remove('is-active'));

      // Ajouter la classe active √† la slide courante
      if (slides[index]) {
        slides[index].classList.add('is-active');
      }
    }

    function nextSlide() {
      currentIndex = (currentIndex + 1) % totalSlides;
      showSlide(currentIndex);
    }

    function startCarousel() {
      if (intervalId) clearInterval(intervalId);
      intervalId = setInterval(nextSlide, intervalDuration);
    }

    function stopCarousel() {
      if (intervalId) {
        clearInterval(intervalId);
        intervalId = null;
      }
    }

    // Initialiser la premi√®re slide
    showSlide(0);

    // D√©marrer le carrousel automatique
    startCarousel();

    // Pause au survol (optionnel, pour meilleure UX)
    carousel.addEventListener('mouseenter', stopCarousel);
    carousel.addEventListener('mouseleave', startCarousel);
  })();
</script>

{% schema %}
{
  "name": "Milaura Hero Showcase",
  "tag": "section",
  "class": "section",
  "enabled_on": {
    "templates": ["*"]
  },
  "settings": [
    {
      "type": "header",
      "content": "Header"
    },
    {
      "type": "text",
      "id": "kicker",
      "label": "Kicker (Sur-titre)",
      "default": "D√©couvrez"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Titre principal",
      "default": "Votre univers √©nerg√©tique"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Sous-titre descriptif",
      "default": "Pierres pr√©cieuses, bijoux uniques et rituels pour √©lever votre √©nergie"
    },
    {
      "type": "header",
      "content": "Pilier 1"
    },
    {
      "type": "text",
      "id": "pillar_1_icon",
      "label": "Ic√¥ne (Emoji)",
      "default": "üíé"
    },
    {
      "type": "text",
      "id": "pillar_1_title",
      "label": "Titre",
      "default": "Pierres & cristaux"
    },
    {
      "type": "textarea",
      "id": "pillar_1_text",
      "label": "Texte",
      "default": "S√©lection de pierres naturelles de haute qualit√©, choisies √† la main."
    },
    {
      "type": "url",
      "id": "pillar_1_link",
      "label": "Lien"
    },
    {
      "type": "header",
      "content": "Pilier 2"
    },
    {
      "type": "text",
      "id": "pillar_2_icon",
      "label": "Ic√¥ne (Emoji)",
      "default": "‚ú®"
    },
    {
      "type": "text",
      "id": "pillar_2_title",
      "label": "Titre",
      "default": "Bijoux artisanaux"
    },
    {
      "type": "textarea",
      "id": "pillar_2_text",
      "label": "Texte",
      "default": "Cr√©ations artisanales uniques, charg√©es d'intention et d'√©nergie."
    },
    {
      "type": "url",
      "id": "pillar_2_link",
      "label": "Lien"
    },
    {
      "type": "header",
      "content": "Pilier 3"
    },
    {
      "type": "text",
      "id": "pillar_3_icon",
      "label": "Ic√¥ne (Emoji)",
      "default": "üïØÔ∏è"
    },
    {
      "type": "text",
      "id": "pillar_3_title",
      "label": "Titre",
      "default": "Rituels & bougies"
    },
    {
      "type": "textarea",
      "id": "pillar_3_text",
      "label": "Texte",
      "default": "Exp√©riences √©nerg√©tiques pour transformer votre espace et votre bien-√™tre."
    },
    {
      "type": "url",
      "id": "pillar_3_link",
      "label": "Lien"
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Milaura Hero Showcase",
      "blocks": [
        {
          "type": "slide"
        },
        {
          "type": "slide"
        },
        {
          "type": "slide"
        }
      ]
    }
  ]
}
{% endschema %}
