{% comment %}
  Milaura Dashboard V2 ‚Äî App-like mobile-first
  Score + profil + CTA en hero card, KPIs swipeable, cold reading accordeon,
  ritual carousel, bottom tab bar fixe
{% endcomment %}

{% style %}
/* ============================================
   MILAURA DASHBOARD ‚Äî APP-LIKE CSS
   ============================================ */
#MilauraDashboard-{{ section.id }} {
  --dash-accent: {{ section.settings.accent_color | default: '#C0A062' }};
  --dash-accent-rgb: 192, 160, 98;
  max-width: 520px;
  margin: 0 auto;
  padding: 0 0 80px 0; /* space for bottom bar */
}

/* --- LOADING --- */
.dash-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 80px 20px;
  gap: 16px;
}
.dash-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid rgba(192, 160, 98, 0.12);
  border-top-color: var(--dash-accent);
  border-radius: 50%;
  animation: dash-spin 0.8s linear infinite;
}
@keyframes dash-spin { to { transform: rotate(360deg); } }
.dash-loading-text {
  font-family: var(--milaura-font-body);
  font-size: 14px;
  color: var(--milaura-text-light);
}

/* --- EMPTY STATE --- */
.dash-empty {
  display: none;
  text-align: center;
  padding: 48px 20px;
}
.dash-empty-card {
  background-color: rgba(255, 255, 255, 0.85);
  background: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid rgba(192, 160, 98, 0.35);
  border-radius: 24px;
  box-shadow: 0 12px 40px rgba(192, 160, 98, 0.12);
  padding: 40px 28px;
  max-width: 400px;
  margin: 0 auto;
}
.dash-empty-icon { font-size: 40px; margin-bottom: 12px; display: block; }
.dash-empty-title {
  font-family: var(--milaura-font-heading);
  font-size: 22px;
  font-weight: 500;
  color: var(--milaura-text);
  margin: 0 0 10px 0;
  line-height: 1.25;
}
.dash-empty-text {
  font-family: var(--milaura-font-body);
  font-size: 14px;
  color: var(--milaura-text-light);
  line-height: 1.6;
  margin: 0 0 20px 0;
}

/* --- DASHBOARD STATE --- */
.dash-main {
  display: none;
  flex-direction: column;
  gap: 16px;
  padding: 0 4px;
}

/* ============================================
   HERO CARD (score + profil + produit CTA)
   ============================================ */
.dash-hero {
  background-color: rgba(255, 255, 255, 0.88);
  background: rgba(255, 255, 255, 0.78);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid rgba(192, 160, 98, 0.35);
  border-radius: 28px;
  box-shadow: 0 16px 48px rgba(192, 160, 98, 0.12);
  padding: 24px 20px;
  text-align: center;
}
.dash-greeting {
  font-family: var(--milaura-font-heading);
  font-size: 24px;
  font-weight: 500;
  color: var(--milaura-text);
  margin: 0 0 4px 0;
  line-height: 1.2;
}
.dash-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 14px;
  border-radius: 50px;
  background: rgba(var(--dash-accent-rgb), 0.1);
  border: 1px solid rgba(var(--dash-accent-rgb), 0.2);
  font-family: var(--milaura-font-body);
  font-size: 12px;
  font-weight: 600;
  color: var(--dash-accent);
  margin-bottom: 16px;
}
.dash-badge-icon { font-size: 14px; line-height: 1; }

/* Score ring inside hero */
.dash-score-ring {
  position: relative;
  width: 130px;
  height: 130px;
  margin: 0 auto 12px;
}
.dash-score-ring svg {
  transform: rotate(-90deg);
  width: 100%;
  height: 100%;
}
.dash-score-bg {
  fill: none;
  stroke: rgba(var(--dash-accent-rgb), 0.1);
  stroke-width: 8;
}
.dash-score-fill {
  fill: none;
  stroke: var(--dash-accent);
  stroke-width: 8;
  stroke-linecap: round;
  stroke-dasharray: 440;
  stroke-dashoffset: 440;
  transition: stroke-dashoffset 1.5s cubic-bezier(0.4, 0, 0.2, 1);
}
.dash-score-value {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}
.dash-score-percent {
  font-family: var(--milaura-font-heading);
  font-size: 32px;
  font-weight: 600;
  color: var(--dash-accent);
  line-height: 1;
  display: block;
}
.dash-score-label {
  font-family: var(--milaura-font-body);
  font-size: 10px;
  color: var(--milaura-text-light);
  text-transform: uppercase;
  letter-spacing: 1.5px;
  margin-top: 2px;
  display: block;
}

/* Hero product CTA row */
.dash-hero-cta {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 16px;
  padding: 12px;
  background: rgba(var(--dash-accent-rgb), 0.06);
  border-radius: 18px;
  text-align: left;
}
.dash-hero-cta-img {
  width: 56px;
  height: 56px;
  border-radius: 14px;
  object-fit: cover;
  flex-shrink: 0;
}
.dash-hero-cta-info {
  flex: 1;
  min-width: 0;
}
.dash-hero-cta-name {
  font-family: var(--milaura-font-heading);
  font-size: 14px;
  font-weight: 500;
  color: var(--milaura-text);
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.dash-hero-cta-sub {
  font-family: var(--milaura-font-body);
  font-size: 11px;
  color: var(--milaura-text-light);
  margin: 2px 0 0 0;
}
.dash-hero-cta-btn {
  flex-shrink: 0;
  padding: 10px 20px;
  font-size: 11px;
}

/* ============================================
   KPI PILLS (horizontal scroll)
   ============================================ */
.dash-kpis {
  display: flex;
  gap: 10px;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  padding: 2px 0;
}
.dash-kpis::-webkit-scrollbar { display: none; }
.dash-kpi {
  flex-shrink: 0;
  scroll-snap-align: start;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  background-color: rgba(255, 255, 255, 0.85);
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(192, 160, 98, 0.2);
  border-radius: 16px;
  white-space: nowrap;
}
.dash-kpi-icon { font-size: 18px; line-height: 1; }
.dash-kpi-text { display: flex; flex-direction: column; }
.dash-kpi-value {
  font-family: var(--milaura-font-heading);
  font-size: 14px;
  font-weight: 600;
  color: var(--milaura-text);
  line-height: 1.2;
}
.dash-kpi-label {
  font-family: var(--milaura-font-body);
  font-size: 10px;
  color: var(--milaura-text-light);
  text-transform: uppercase;
  letter-spacing: 0.8px;
}

/* ============================================
   MANTRA (compact accent band)
   ============================================ */
.dash-mantra {
  text-align: center;
  padding: 16px 14px;
  background: rgba(var(--dash-accent-rgb), 0.06);
  border-radius: 18px;
  border: 1px solid rgba(var(--dash-accent-rgb), 0.12);
}
.dash-mantra-text {
  font-family: var(--milaura-font-script);
  font-size: 22px;
  color: var(--dash-accent);
  line-height: 1.3;
  margin: 0;
}
.dash-mantra-quotes {
  font-family: var(--milaura-font-heading);
  font-size: 18px;
  color: rgba(var(--dash-accent-rgb), 0.35);
}

/* ============================================
   COLD READING (accordion)
   ============================================ */
.dash-reading {
  background-color: rgba(255, 255, 255, 0.85);
  background: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid rgba(192, 160, 98, 0.3);
  border-radius: 22px;
  overflow: hidden;
}
.dash-reading-toggle {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 18px 20px;
  background: none;
  border: none;
  cursor: pointer;
  font-family: var(--milaura-font-heading);
  font-size: 16px;
  font-weight: 500;
  font-style: italic;
  color: var(--milaura-text);
  text-align: left;
  line-height: 1.35;
}
.dash-reading-arrow {
  flex-shrink: 0;
  width: 20px;
  height: 20px;
  transition: transform 0.3s ease;
  color: var(--milaura-text-light);
}
.dash-reading.is-open .dash-reading-arrow {
  transform: rotate(180deg);
}
.dash-reading-body {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}
.dash-reading.is-open .dash-reading-body {
  max-height: 600px;
}
.dash-reading-inner {
  padding: 0 20px 20px;
}
.dash-reading-text {
  font-family: var(--milaura-font-body);
  font-size: {{ section.settings.body_size | default: 14 }}px;
  color: var(--milaura-text-light);
  line-height: 1.7;
  margin: 0 0 14px 0;
}
.dash-reading-text .word {
  opacity: 0;
  transition: opacity 0.25s ease;
}
.dash-reading-text .word.visible { opacity: 1; }
.dash-reading-bullets {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.dash-reading-bullets li {
  font-family: var(--milaura-font-body);
  font-size: 13px;
  color: var(--milaura-text);
  padding-left: 20px;
  position: relative;
  line-height: 1.5;
}
.dash-reading-bullets li::before {
  content: '';
  position: absolute;
  left: 0;
  top: 8px;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--dash-accent);
  opacity: 0.5;
}

/* ============================================
   RITUAL (horizontal carousel)
   ============================================ */
.dash-ritual { padding: 0; }
.dash-ritual-title {
  font-family: var(--milaura-font-heading);
  font-size: 17px;
  font-weight: 500;
  color: var(--milaura-text);
  margin: 0 0 10px 4px;
}
.dash-ritual-steps {
  display: flex;
  gap: 10px;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  padding-bottom: 4px;
}
.dash-ritual-steps::-webkit-scrollbar { display: none; }
.dash-ritual-step {
  flex-shrink: 0;
  width: 75%;
  max-width: 280px;
  scroll-snap-align: start;
  background-color: rgba(255, 255, 255, 0.85);
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(192, 160, 98, 0.2);
  border-radius: 18px;
  padding: 16px 14px;
  display: flex;
  gap: 12px;
  align-items: flex-start;
}
.dash-ritual-num {
  flex-shrink: 0;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: var(--dash-accent);
  color: #fff;
  font-family: var(--milaura-font-heading);
  font-size: 13px;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
}
.dash-ritual-text {
  font-family: var(--milaura-font-body);
  font-size: 13px;
  color: var(--milaura-text);
  line-height: 1.55;
  padding-top: 4px;
}

/* ============================================
   MOOD BARS (compact)
   ============================================ */
.dash-mood { padding: 0; }
.dash-mood-title {
  font-family: var(--milaura-font-heading);
  font-size: 17px;
  font-weight: 500;
  color: var(--milaura-text);
  margin: 0 0 10px 4px;
}
.dash-mood-bars {
  display: flex;
  flex-direction: column;
  gap: 8px;
  background-color: rgba(255, 255, 255, 0.85);
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(192, 160, 98, 0.2);
  border-radius: 18px;
  padding: 16px 14px;
}
.dash-mood-row {
  display: flex;
  align-items: center;
  gap: 8px;
}
.dash-mood-label {
  width: 85px;
  font-family: var(--milaura-font-body);
  font-size: 12px;
  color: var(--milaura-text-light);
  display: flex;
  align-items: center;
  gap: 5px;
  flex-shrink: 0;
}
.dash-mood-label-icon { font-size: 12px; line-height: 1; }
.dash-mood-track {
  flex: 1;
  height: 6px;
  background: rgba(192, 160, 98, 0.08);
  border-radius: 6px;
  overflow: hidden;
  min-width: 40px;
}
.dash-mood-fill {
  height: 100%;
  border-radius: 6px;
  width: 0%;
  transition: width 1s ease;
}
.dash-mood-fill.is-winner {
  background: linear-gradient(90deg, var(--dash-accent), rgba(var(--dash-accent-rgb), 0.5));
}
.dash-mood-fill.is-secondary {
  background: linear-gradient(90deg, rgba(192, 160, 98, 0.3), rgba(192, 160, 98, 0.1));
}
.dash-mood-pct {
  width: 36px;
  font-family: var(--milaura-font-body);
  font-size: 11px;
  color: var(--milaura-text-light);
  text-align: right;
  flex-shrink: 0;
}

/* ============================================
   VOYAGE (compact card)
   ============================================ */
.dash-voyage {
  background-color: rgba(255, 255, 255, 0.85);
  background: rgba(255, 255, 255, 0.65);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(192, 160, 98, 0.15);
  border-radius: 16px;
  padding: 14px 16px;
  text-align: center;
}
.dash-voyage-title {
  font-family: var(--milaura-font-heading);
  font-size: 15px;
  font-weight: 500;
  color: var(--milaura-text);
  margin: 0 0 4px 0;
}
.dash-voyage-date {
  font-family: var(--milaura-font-body);
  font-size: 12px;
  color: var(--milaura-text-light);
  margin: 0 0 2px 0;
}
.dash-voyage-summary {
  font-family: var(--milaura-font-body);
  font-size: 13px;
  color: var(--milaura-text);
  margin: 0;
}

/* ============================================
   BOTTOM TAB BAR (fixed, app-like)
   ============================================ */
.dash-tabbar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 100;
  background-color: rgba(255, 255, 255, 0.96);
  background: rgba(255, 255, 255, 0.92);
  backdrop-filter: blur(24px) saturate(180%);
  -webkit-backdrop-filter: blur(24px) saturate(180%);
  border-top: 1px solid rgba(192, 160, 98, 0.2);
  display: none; /* shown by JS */
  justify-content: space-around;
  align-items: center;
  padding: 8px 0;
  padding-bottom: max(8px, env(safe-area-inset-bottom));
}
.dash-tab {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
  text-decoration: none;
  padding: 4px 12px;
  border-radius: 12px;
  transition: background 0.2s ease;
  -webkit-tap-highlight-color: transparent;
}
.dash-tab:active {
  background: rgba(var(--dash-accent-rgb), 0.08);
}
.dash-tab-icon {
  font-size: 20px;
  line-height: 1;
}
.dash-tab-label {
  font-family: var(--milaura-font-body);
  font-size: 10px;
  font-weight: 600;
  color: var(--milaura-text-light);
  letter-spacing: 0.3px;
}
.dash-tab.is-active .dash-tab-label {
  color: var(--dash-accent);
}

/* ============================================
   SCROLL REVEAL
   ============================================ */
.dash-reveal {
  opacity: 0;
  transform: translateY(16px);
  transition: opacity 0.5s ease, transform 0.5s ease;
}
.dash-reveal.revealed {
  opacity: 1;
  transform: translateY(0);
}

/* ============================================
   RESPONSIVE DESKTOP (> 520px)
   ============================================ */
@media screen and (min-width: 521px) {
  #MilauraDashboard-{{ section.id }} {
    padding-bottom: 40px;
  }
  .dash-tabbar {
    position: static;
    background: transparent;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    border-top: none;
    padding: 8px 0;
    gap: 8px;
  }
  .dash-tab {
    flex-direction: row;
    gap: 6px;
    padding: 10px 20px;
    background: rgba(255, 255, 255, 0.8);
    border: 1px solid rgba(192, 160, 98, 0.25);
    border-radius: 50px;
  }
  .dash-tab:hover {
    border-color: var(--milaura-gold);
    box-shadow: 0 4px 15px rgba(192, 160, 98, 0.15);
  }
  .dash-tab-label {
    font-size: 12px;
  }
  .dash-ritual-step {
    width: 45%;
  }
}

/* ============================================
   SMALL MOBILE (‚â§380px)
   ============================================ */
@media screen and (max-width: 380px) {
  .dash-hero {
    padding: 20px 16px;
    border-radius: 22px;
  }
  .dash-greeting {
    font-size: 20px;
  }
  .dash-score-ring {
    width: 110px;
    height: 110px;
  }
  .dash-score-percent {
    font-size: 26px;
  }
  .dash-kpi {
    padding: 8px 12px;
  }
  .dash-mantra-text {
    font-size: 19px;
  }
  .dash-mood-label {
    width: 72px;
    font-size: 11px;
  }
  .dash-reading-toggle {
    font-size: 14px;
    padding: 14px 16px;
  }
}

/* ============================================
   REDUCED MOTION
   ============================================ */
@media (prefers-reduced-motion: reduce) {
  .dash-spinner { animation: none; border-top-color: transparent; }
  .dash-score-fill { transition: none; }
  .dash-mood-fill { transition: none; }
  .dash-reveal { opacity: 1; transform: none; transition: none; }
  .dash-reading-body { transition: none; }
  .dash-reading-text .word { opacity: 1; transition: none; }
  .dash-reading-arrow { transition: none; }
}
{% endstyle %}

<div id="MilauraDashboard-{{ section.id }}">

  {%- comment -%} LOADING {%- endcomment -%}
  <div class="dash-loading" data-dash-state="loading">
    <div class="dash-spinner" aria-hidden="true"></div>
    <div class="dash-loading-text">{{ section.settings.loading_text | default: "Chargement de votre profil..." }}</div>
  </div>

  {%- comment -%} EMPTY STATE {%- endcomment -%}
  <div class="dash-empty" data-dash-state="empty">
    <div class="dash-empty-card">
      <span class="dash-empty-icon" aria-hidden="true">{{ section.settings.empty_icon | default: "‚ú®" }}</span>
      <h2 class="dash-empty-title">{{ section.settings.empty_title | default: "D√©couvrez votre profil √©motionnel" }}</h2>
      <p class="dash-empty-text">{{ section.settings.empty_text | default: "Votre diagnostic r√©v√®lera la bougie et la pierre qui r√©sonnent avec votre √©nergie actuelle." }}</p>
      <a href="{{ section.settings.quiz_url | default: '/pages/quiz' }}" class="milaura-btn-gold">
        {{ section.settings.empty_cta | default: "Faire le diagnostic" }}
      </a>
    </div>
  </div>

  {%- comment -%} DASHBOARD {%- endcomment -%}
  <div class="dash-main" data-dash-state="dashboard">

    {%- comment -%} HERO CARD: greeting + score + product CTA {%- endcomment -%}
    <div class="dash-hero dash-reveal">
      <h1 class="dash-greeting">
        {{ section.settings.greeting_prefix | default: "Bonjour" }}{% if customer %} {{ customer.first_name }}{% endif %}
      </h1>
      <div class="dash-badge" data-dash-badge>
        <span class="dash-badge-icon" data-dash-badge-icon></span>
        <span data-dash-badge-label></span>
      </div>

      <div class="dash-score-ring">
        <svg viewBox="0 0 160 160" aria-hidden="true">
          <circle class="dash-score-bg" cx="80" cy="80" r="70"></circle>
          <circle class="dash-score-fill" cx="80" cy="80" r="70" data-dash-score-circle></circle>
        </svg>
        <div class="dash-score-value">
          <span class="dash-score-percent" data-dash-score-pct>0%</span>
          <span class="dash-score-label">{{ section.settings.score_label | default: "Vibration" }}</span>
        </div>
      </div>

      <div class="dash-hero-cta" data-dash-hero-cta style="display:none">
        <img class="dash-hero-cta-img" src="" alt="" data-dash-product-img loading="lazy">
        <div class="dash-hero-cta-info">
          <p class="dash-hero-cta-name" data-dash-product-title></p>
          <p class="dash-hero-cta-sub" data-dash-product-badges></p>
        </div>
        <button type="button" class="milaura-btn-gold dash-hero-cta-btn" data-dash-add-to-cart disabled>
          Adopter
        </button>
      </div>
    </div>

    {%- comment -%} KPI PILLS (horizontal scroll) {%- endcomment -%}
    <div class="dash-kpis dash-reveal">
      <div class="dash-kpi">
        <span class="dash-kpi-icon" data-dash-kpi-profile-icon></span>
        <div class="dash-kpi-text">
          <span class="dash-kpi-value" data-dash-kpi-profile></span>
          <span class="dash-kpi-label">Profil</span>
        </div>
      </div>
      <div class="dash-kpi">
        <span class="dash-kpi-icon">üíé</span>
        <div class="dash-kpi-text">
          <span class="dash-kpi-value" data-dash-kpi-stone></span>
          <span class="dash-kpi-label">Pierre</span>
        </div>
      </div>
      <div class="dash-kpi">
        <span class="dash-kpi-icon">üïØÔ∏è</span>
        <div class="dash-kpi-text">
          <span class="dash-kpi-value" data-dash-kpi-scent></span>
          <span class="dash-kpi-label">Senteur</span>
        </div>
      </div>
      <div class="dash-kpi">
        <span class="dash-kpi-icon">üìÖ</span>
        <div class="dash-kpi-text">
          <span class="dash-kpi-value" data-dash-kpi-date></span>
          <span class="dash-kpi-label">Diagnostic</span>
        </div>
      </div>
    </div>

    {%- comment -%} MANTRA {%- endcomment -%}
    <div class="dash-mantra dash-reveal">
      <p class="dash-mantra-text">
        <span class="dash-mantra-quotes">&laquo;&nbsp;</span><span data-dash-mantra></span><span class="dash-mantra-quotes">&nbsp;&raquo;</span>
      </p>
    </div>

    {%- comment -%} COLD READING (accordion) {%- endcomment -%}
    {%- if section.settings.show_cold_reading != false -%}
    <div class="dash-reading dash-reveal" data-dash-reading>
      <button type="button" class="dash-reading-toggle" data-dash-reading-toggle aria-expanded="false">
        <span data-dash-reading-title></span>
        <svg class="dash-reading-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
      </button>
      <div class="dash-reading-body">
        <div class="dash-reading-inner">
          <p class="dash-reading-text" data-dash-reading-text></p>
          <ul class="dash-reading-bullets" data-dash-reading-bullets></ul>
        </div>
      </div>
    </div>
    {%- endif -%}

    {%- comment -%} RITUAL (carousel) {%- endcomment -%}
    <div class="dash-ritual dash-reveal" data-dash-ritual>
      <h3 class="dash-ritual-title">{{ section.settings.ritual_title | default: "Ton rituel" }}</h3>
      <div class="dash-ritual-steps" data-dash-ritual-steps></div>
    </div>

    {%- comment -%} MOOD BARS {%- endcomment -%}
    {%- if section.settings.show_mood_bars != false -%}
    <div class="dash-mood dash-reveal" data-dash-mood>
      <h3 class="dash-mood-title">{{ section.settings.mood_title | default: "Ta m√©t√©o √©motionnelle" }}</h3>
      <div class="dash-mood-bars" data-dash-mood-bars></div>
    </div>
    {%- endif -%}

    {%- comment -%} VOYAGE {%- endcomment -%}
    {%- if section.settings.show_voyage != false -%}
    <div class="dash-voyage dash-reveal" data-dash-voyage>
      <h3 class="dash-voyage-title">{{ section.settings.voyage_title | default: "Mon Voyage" }}</h3>
      <p class="dash-voyage-date" data-dash-voyage-date></p>
      <p class="dash-voyage-summary" data-dash-voyage-summary></p>
    </div>
    {%- endif -%}

  </div><!-- /dash-main -->

  {%- comment -%} BOTTOM TAB BAR {%- endcomment -%}
  <nav class="dash-tabbar" data-dash-tabbar aria-label="Navigation rapide">
    <a href="{{ section.settings.quiz_url | default: '/pages/quiz' }}" class="dash-tab">
      <span class="dash-tab-icon">üîÆ</span>
      <span class="dash-tab-label">Quiz</span>
    </a>
    <a href="/collections/all" class="dash-tab">
      <span class="dash-tab-icon">üõçÔ∏è</span>
      <span class="dash-tab-label">Boutique</span>
    </a>
    <a href="#" class="dash-tab is-active" data-dash-tab-add>
      <span class="dash-tab-icon">‚ú®</span>
      <span class="dash-tab-label" data-dash-tab-add-label>Adopter</span>
    </a>
    <a href="/account" class="dash-tab">
      <span class="dash-tab-icon">üë§</span>
      <span class="dash-tab-label">Compte</span>
    </a>
  </nav>

</div><!-- /MilauraDashboard -->

{%- comment -%} PRODUCT DATA (Liquid ‚Üí JSON) {%- endcomment -%}
<script type="application/json" data-dash-products>
{
  {%- assign profiles = "apaisement,protection,serenite,amour,chance" | split: "," -%}
  {%- for p in profiles -%}
    {%- assign pid = "profile_" | append: p | append: "_product" -%}
    {%- assign prod = section.settings[pid] -%}
    "{{ p }}": {% if prod %}{
      "title": {{ prod.title | json }},
      "url": {{ prod.url | json }},
      "price": {{ prod.price | money | json }},
      "featured_image": {% if prod.featured_image %}{{ prod.featured_image | image_url: width: 600 | json }}{% else %}null{% endif %},
      "handle": {{ prod.handle | json }},
      "variant_id": {% if prod.selected_or_first_available_variant %}{{ prod.selected_or_first_available_variant.id }}{% else %}null{% endif %}
    }{% else %}null{% endif %}{% unless forloop.last %},{% endunless %}
  {%- endfor -%}
}
</script>

<script>
(function() {
  'use strict';

  var SECTION_ID = {{ section.id | json }};
  var root = document.getElementById('MilauraDashboard-' + SECTION_ID);
  if (!root) return;

  /* ============================================
     PROFILES (identique a quiz.liquid)
     ============================================ */
  var PROFILES = {
    apaisement: {
      label: 'Apaisement', displayName: 'Apaisement',
      moodLabel: 'Syst√®me nerveux en surchauffe',
      dashboardTitle: 'Ton syst√®me nerveux r√©clame une tr√™ve.',
      description: "Tu es la personne ¬´ forte ¬ª. Celle qui g√®re, qui encaisse, qui avance. De l'ext√©rieur, tout a l'air sous contr√¥le. Mais ton corps, lui, raconte une autre histoire. M√¢choires serr√©es, sommeil agit√©, souffle court... Tu ne te reposes pas, tu t'√©teins d'√©puisement. Ton probl√®me n'est pas ta capacit√© √† faire, c'est ta capacit√© √† d√©poser les armes.",
      bullets: ['Apaisement imm√©diat du syst√®me nerveux', 'Douceur √©motionnelle et l√¢cher-prise', 'Sensation de cocon r√©parateur'],
      ritual: "1. Allume-la. Inspire 3 fois.\n2. Autorise-toi √† √™tre vuln√©rable, juste 10 minutes.\n3. Dis-toi : ¬´ Je peux d√©poser les armes. ¬ª",
      stone: 'Calc√©doine bleue', scent: 'N√©roli', icon: 'üíô',
      colorAccent: '#6BA3C7', colorAccentRgb: '107, 163, 199'
    },
    protection: {
      label: 'Protection', displayName: 'Protection',
      moodLabel: '√ânergie envahie',
      dashboardTitle: "Ton √©nergie est pr√©cieuse, arr√™te de la distribuer.",
      description: "Tu as une hypersensibilit√© que tu essaies de cacher. Tu ressens les ambiances et les intentions des gens avant m√™me qu'ils ne parlent. C'est un don, mais en ce moment, c'est une mal√©diction : tu te laisses envahir. Tu finis tes journ√©es vid√©(e) non pas par ton travail, mais par les autres. Tu as besoin de reconstruire tes fronti√®res.",
      bullets: ['Bouclier √©nerg√©tique', 'Fronti√®res claires et nettes', 'Sanctuaire personnel'],
      ritual: "1. Allume-la en rentrant.\n2. Imagine un mur invisible se lever.\n3. Dis-toi : ¬´ Ici, c'est mon sanctuaire. ¬ª",
      stone: 'Obsidienne noire', scent: "Bois d'oud", icon: 'üñ§',
      colorAccent: '#4A4A4A', colorAccentRgb: '74, 74, 74'
    },
    serenite: {
      label: 'S√©r√©nit√©', displayName: 'S√©r√©nit√©',
      moodLabel: 'Mental en sur-contr√¥le',
      dashboardTitle: 'Ton mental est satur√©, tu dois couper le flux.',
      description: "Tu n'es pas fatigu√©(e) de la vie, tu es fatigu√©(e) de la g√©rer. Ton probl√®me n'est pas le chaos, c'est le sur-contr√¥le. Tu analyses, tu planifies, tu anticipes les probl√®mes qui n'existent pas encore. Ton cerveau est comme un navigateur avec 50 onglets ouverts qui ne r√©pond plus. Tu as perdu la clart√© parce que tu as peur que si tu arr√™tes d'y penser, tout s'√©croule. Spoiler : le monde continuera de tourner si tu d√©branches 10 minutes.",
      bullets: ['D√©connexion s√©lective', 'Reset cognitif', 'Clart√© mentale retrouv√©e'],
      ritual: "1. Coupe le t√©l√©phone. Allume.\n2. Regarde la flamme.\n3. Laisse les pens√©es passer sans les accrocher.",
      stone: 'Am√©thyste', scent: 'Th√© blanc', icon: 'üíú',
      colorAccent: '#9B7EC8', colorAccentRgb: '155, 126, 200'
    },
    amour: {
      label: 'Amour', displayName: 'Amour',
      moodLabel: 'Carence de bienveillance envers soi',
      dashboardTitle: "Tu donnes tout aux autres, mais qui s'occupe de toi ?",
      description: "C'est le paradoxe de ta vie actuelle : tu es une source in√©puisable de soutien pour tes proches, mais tu es d'une duret√© implacable avec toi-m√™me. Tu attends inconsciemment que quelqu'un vienne te ¬´ sauver ¬ª ou te valider, alors que ton c≈ìur a juste besoin de ta propre douceur. Tu es en carence de bienveillance envers toi-m√™me.",
      bullets: ['R√©paration vibratoire du c≈ìur', 'Bienveillance envers soi', 'Douceur enveloppante'],
      ritual: "1. Allume-la. Main sur le c≈ìur.\n2. Dis-toi les mots que tu aimerais entendre de quelqu'un d'autre.\n3. Dis-toi : ¬´ Je m√©rite la douceur que je donne aux autres. ¬ª",
      stone: 'Quartz rose', scent: 'Ambre gris', icon: 'üíó',
      colorAccent: '#D4839E', colorAccentRgb: '212, 131, 158'
    },
    chance: {
      label: 'Chance', displayName: 'Chance',
      moodLabel: "En attente d'un d√©clic",
      dashboardTitle: "Tu es pr√™t(e) pour le renouveau, il manque juste l'√©tincelle.",
      description: "Tu n'es pas d√©prim√©(e), tu es impatient(e). Tu sens au fond de tes tripes que tu es √† la fin d'un cycle. L'ancien ne te convient plus, le nouveau n'est pas encore l√†. Cette zone d'entre-deux te rend nerveux(se). Tu cherches le ¬´ truc ¬ª, l'opportunit√©, le signe qui va tout d√©bloquer. Spoiler : le blocage n'est pas dehors, c'est juste une peur de sauter.",
      bullets: ["√ânergie d'action et d'opportunit√©", 'Joie et √©lan retrouv√©s', 'Feu vert int√©rieur'],
      ritual: "1. Allume-la.\n2. Visualise ton objectif comme s'il √©tait d√©j√† fait.\n3. Souris. L'√©nergie suit l'intention.",
      stone: 'Aventurine verte', scent: "Fleur d'oranger", icon: 'üíö',
      colorAccent: '#6BAF7B', colorAccentRgb: '107, 175, 123'
    }
  };

  var MANTRAS = {
    apaisement: {{ section.settings.profile_apaisement_mantra | default: "Je peux d√©poser les armes" | json }},
    protection: {{ section.settings.profile_protection_mantra | default: "Je prot√®ge mon √©nergie" | json }},
    serenite: {{ section.settings.profile_serenite_mantra | default: "Je l√¢che le contr√¥le" | json }},
    amour: {{ section.settings.profile_amour_mantra | default: "Je m√©rite la douceur que je donne aux autres" | json }},
    chance: {{ section.settings.profile_chance_mantra | default: "L'√©nergie suit l'intention" | json }}
  };

  var MOOD_ORDER = ['apaisement', 'protection', 'serenite', 'amour', 'chance'];

  /* DOM REFS */
  var els = {
    loading: root.querySelector('[data-dash-state="loading"]'),
    empty: root.querySelector('[data-dash-state="empty"]'),
    main: root.querySelector('[data-dash-state="dashboard"]'),
    badge: root.querySelector('[data-dash-badge]'),
    badgeIcon: root.querySelector('[data-dash-badge-icon]'),
    badgeLabel: root.querySelector('[data-dash-badge-label]'),
    scoreCircle: root.querySelector('[data-dash-score-circle]'),
    scorePct: root.querySelector('[data-dash-score-pct]'),
    kpiProfile: root.querySelector('[data-dash-kpi-profile]'),
    kpiProfileIcon: root.querySelector('[data-dash-kpi-profile-icon]'),
    kpiStone: root.querySelector('[data-dash-kpi-stone]'),
    kpiScent: root.querySelector('[data-dash-kpi-scent]'),
    kpiDate: root.querySelector('[data-dash-kpi-date]'),
    readingTitle: root.querySelector('[data-dash-reading-title]'),
    readingText: root.querySelector('[data-dash-reading-text]'),
    readingBullets: root.querySelector('[data-dash-reading-bullets]'),
    readingToggle: root.querySelector('[data-dash-reading-toggle]'),
    readingCard: root.querySelector('[data-dash-reading]'),
    mantra: root.querySelector('[data-dash-mantra]'),
    heroCta: root.querySelector('[data-dash-hero-cta]'),
    productImg: root.querySelector('[data-dash-product-img]'),
    productTitle: root.querySelector('[data-dash-product-title]'),
    productBadges: root.querySelector('[data-dash-product-badges]'),
    addToCartBtn: root.querySelector('[data-dash-add-to-cart]'),
    ritualSteps: root.querySelector('[data-dash-ritual-steps]'),
    moodBars: root.querySelector('[data-dash-mood-bars]'),
    voyageDate: root.querySelector('[data-dash-voyage-date]'),
    voyageSummary: root.querySelector('[data-dash-voyage-summary]'),
    tabbar: root.querySelector('[data-dash-tabbar]'),
    tabAdd: root.querySelector('[data-dash-tab-add]'),
    tabAddLabel: root.querySelector('[data-dash-tab-add-label]')
  };

  /* PRODUCT DATA */
  var productData = {};
  try {
    var jsonEl = document.querySelector('[data-dash-products]');
    if (jsonEl) productData = JSON.parse(jsonEl.textContent);
  } catch (e) { console.error('Dashboard: product parse error', e); }

  /* STATE */
  function showState(state) {
    els.loading.style.display = state === 'loading' ? 'flex' : 'none';
    els.empty.style.display = state === 'empty' ? 'block' : 'none';
    els.main.style.display = state === 'dashboard' ? 'flex' : 'none';
    if (els.tabbar) els.tabbar.style.display = state === 'dashboard' ? 'flex' : 'none';
  }

  function setAccentColor(hex, rgb) {
    root.style.setProperty('--dash-accent', hex);
    root.style.setProperty('--dash-accent-rgb', rgb);
  }

  /* RENDER SCORE */
  function renderScore(percentages, profileId) {
    var pct = percentages && percentages[profileId] ? percentages[profileId] : 0;
    if (els.scorePct) els.scorePct.textContent = Math.round(pct) + '%';
    if (els.scoreCircle) {
      var c = 2 * Math.PI * 70;
      els.scoreCircle.style.strokeDasharray = c;
      els.scoreCircle.style.strokeDashoffset = c;
      requestAnimationFrame(function() {
        requestAnimationFrame(function() {
          els.scoreCircle.style.strokeDashoffset = c - (pct / 100) * c;
        });
      });
    }
  }

  /* RENDER KPIs */
  function renderKPIs(data, profile) {
    if (els.kpiProfile) els.kpiProfile.textContent = profile.displayName;
    if (els.kpiProfileIcon) els.kpiProfileIcon.textContent = profile.icon;
    if (els.kpiStone) els.kpiStone.textContent = data.stone || profile.stone;
    if (els.kpiScent) els.kpiScent.textContent = data.scent || profile.scent;
    if (els.kpiDate) {
      var d = data.timestamp ? new Date(data.timestamp) : new Date();
      els.kpiDate.textContent = d.toLocaleDateString('fr-FR', { day: 'numeric', month: 'short' });
    }
  }

  /* RENDER COLD READING (accordion + word reveal) */
  function renderColdReading(profile) {
    if (els.readingTitle) els.readingTitle.textContent = profile.dashboardTitle;
    if (els.readingText) {
      var words = profile.description.split(' ');
      els.readingText.innerHTML = words.map(function(w) { return '<span class="word">' + w + '</span>'; }).join(' ');
    }
    if (els.readingBullets && profile.bullets) {
      els.readingBullets.innerHTML = profile.bullets.map(function(b) { return '<li>' + b + '</li>'; }).join('');
    }
    /* Accordion toggle */
    if (els.readingToggle && els.readingCard) {
      els.readingToggle.addEventListener('click', function() {
        var isOpen = els.readingCard.classList.toggle('is-open');
        els.readingToggle.setAttribute('aria-expanded', isOpen);
        /* Trigger word reveal on first open */
        if (isOpen && els.readingText) {
          var wordEls = els.readingText.querySelectorAll('.word:not(.visible)');
          if (wordEls.length > 0) {
            var reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            wordEls.forEach(function(el, i) {
              if (reduced) { el.classList.add('visible'); }
              else { setTimeout(function() { el.classList.add('visible'); }, 25 * i); }
            });
          }
        }
      });
    }
  }

  /* RENDER MANTRA */
  function renderMantra(profileId) {
    if (els.mantra) els.mantra.textContent = MANTRAS[profileId] || '';
  }

  /* RENDER PRODUCT (in hero CTA + tab bar) */
  var currentVariantId = null;
  function renderProduct(profileId, profile) {
    var prod = productData[profileId];
    if (!prod) {
      if (els.heroCta) els.heroCta.style.display = 'none';
      return;
    }
    if (els.heroCta) els.heroCta.style.display = 'flex';
    if (els.productImg) { els.productImg.src = prod.featured_image || ''; els.productImg.alt = prod.title || ''; }
    if (els.productTitle) els.productTitle.textContent = prod.title || '';
    if (els.productBadges) els.productBadges.textContent = profile.stone + ' ¬∑ ' + profile.scent;
    if (els.addToCartBtn && prod.variant_id) {
      els.addToCartBtn.disabled = false;
      currentVariantId = prod.variant_id;
    }
    /* Tab bar add button */
    if (els.tabAddLabel) els.tabAddLabel.textContent = prod.price || 'Adopter';
  }

  /* RENDER RITUAL */
  function renderRitual(profile, data) {
    if (!els.ritualSteps) return;
    var ritual = data.ritual || profile.ritual || '';
    var steps = ritual.split('\n').filter(function(s) { return s.trim(); });
    els.ritualSteps.innerHTML = steps.map(function(step, i) {
      return '<div class="dash-ritual-step"><span class="dash-ritual-num">' + (i + 1) + '</span><span class="dash-ritual-text">' + step.replace(/^\d+\.\s*/, '') + '</span></div>';
    }).join('');
  }

  /* RENDER MOOD BARS */
  function renderMoodBars(percentages, profileId) {
    if (!els.moodBars || !percentages) return;
    els.moodBars.innerHTML = MOOD_ORDER.map(function(id) {
      var p = PROFILES[id], pct = percentages[id] || 0, w = id === profileId;
      return '<div class="dash-mood-row"><span class="dash-mood-label"><span class="dash-mood-label-icon">' + p.icon + '</span> ' + p.label + '</span><div class="dash-mood-track"><div class="dash-mood-fill ' + (w ? 'is-winner' : 'is-secondary') + '" data-pct="' + Math.round(pct) + '"></div></div><span class="dash-mood-pct">' + Math.round(pct) + '%</span></div>';
    }).join('');
    requestAnimationFrame(function() { requestAnimationFrame(function() {
      els.moodBars.querySelectorAll('.dash-mood-fill').forEach(function(el) { el.style.width = el.getAttribute('data-pct') + '%'; });
    }); });
  }

  /* RENDER VOYAGE */
  function renderVoyage(data, profile) {
    if (els.voyageDate && data.timestamp) {
      var d = new Date(data.timestamp);
      els.voyageDate.textContent = 'Diagnostic du ' + d.toLocaleDateString('fr-FR', { day: 'numeric', month: 'long', year: 'numeric' });
    }
    if (els.voyageSummary) els.voyageSummary.textContent = 'Profil ' + profile.displayName + ' ‚Äî ' + profile.stone + ' & ' + profile.scent;
  }

  /* RENDER BADGE */
  function renderBadge(profile) {
    if (els.badgeIcon) els.badgeIcon.textContent = profile.icon;
    if (els.badgeLabel) els.badgeLabel.textContent = 'Profil ' + profile.displayName;
  }

  /* ADD TO CART */
  function addToCart(variantId, btn) {
    if (!variantId || btn.disabled) return;
    var orig = btn.textContent;
    btn.textContent = '...';
    btn.disabled = true;
    fetch('/cart/add.js', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ id: parseInt(variantId, 10), quantity: 1 })
    })
    .then(function(r) { return r.json(); })
    .then(function() {
      btn.textContent = '\u2713 Ajout√©';
      btn.style.background = 'linear-gradient(135deg, #4CAF50, #66BB6A)';
      setTimeout(function() { btn.textContent = orig; btn.style.background = ''; btn.disabled = false; }, 2000);
      if (typeof window.updateCartCount === 'function') window.updateCartCount();
    })
    .catch(function() {
      btn.textContent = 'Erreur';
      btn.style.background = 'linear-gradient(135deg, #f44336, #e57373)';
      btn.disabled = false;
      setTimeout(function() { btn.textContent = orig; btn.style.background = ''; }, 2000);
    });
  }

  /* SCROLL REVEAL */
  function initScrollAnimations() {
    var reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (reduced || !('IntersectionObserver' in window)) {
      root.querySelectorAll('.dash-reveal').forEach(function(el) { el.classList.add('revealed'); });
      return;
    }
    var obs = new IntersectionObserver(function(entries) {
      entries.forEach(function(e) { if (e.isIntersecting) { e.target.classList.add('revealed'); obs.unobserve(e.target); } });
    }, { threshold: 0.1, rootMargin: '0px 0px -20px 0px' });
    root.querySelectorAll('.dash-reveal').forEach(function(el) { obs.observe(el); });
  }

  /* SHOW DASHBOARD */
  function showDashboard(data) {
    var profileId = data.profileId;
    var profile = PROFILES[profileId];
    if (!profile) { showState('empty'); return; }

    setAccentColor(data.profileAccent || profile.colorAccent, data.profileAccentRgb || profile.colorAccentRgb);
    renderBadge(profile);
    renderScore(data.percentages, profileId);
    renderKPIs(data, profile);
    renderColdReading(profile);
    renderMantra(profileId);
    renderProduct(profileId, profile);
    renderRitual(profile, data);
    renderMoodBars(data.percentages, profileId);
    renderVoyage(data, profile);

    showState('dashboard');
    initScrollAnimations();
  }

  /* INIT */
  function init() {
    showState('loading');

    /* Add-to-cart listeners */
    if (els.addToCartBtn) {
      els.addToCartBtn.addEventListener('click', function() { addToCart(currentVariantId, this); });
    }
    /* Tab bar add button */
    if (els.tabAdd) {
      els.tabAdd.addEventListener('click', function(e) {
        e.preventDefault();
        if (currentVariantId && els.tabAddLabel) addToCart(currentVariantId, els.tabAddLabel);
      });
    }

    var raw = null;
    try { raw = localStorage.getItem('milauraLastResult'); } catch (e) {}
    if (!raw) { showState('empty'); return; }
    var data = null;
    try { data = JSON.parse(raw); } catch (e) { showState('empty'); return; }
    if (!data || !data.profileId || !PROFILES[data.profileId]) { showState('empty'); return; }

    setTimeout(function() { showDashboard(data); }, 350);
  }

  /* LISTEN FOR QUIZ UPDATE */
  window.addEventListener('milaura:quiz-result', function(e) {
    if (e.detail && e.detail.profileId) showDashboard(e.detail);
  });

  /* BOOT */
  if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', init); }
  else { init(); }
})();
</script>

{% schema %}
{
  "name": "Milaura Dashboard",
  "enabled_on": {
    "templates": ["customers/account"]
  },
  "settings": [
    {
      "type": "header",
      "content": "Textes g√©n√©raux"
    },
    {
      "type": "text",
      "id": "greeting_prefix",
      "label": "Pr√©fixe de salutation",
      "default": "Bonjour"
    },
    {
      "type": "text",
      "id": "loading_text",
      "label": "Texte de chargement",
      "default": "Chargement de votre profil..."
    },
    {
      "type": "text",
      "id": "score_label",
      "label": "Label du score",
      "default": "Vibration"
    },
    {
      "type": "text",
      "id": "product_eyebrow",
      "label": "Accroche produit",
      "default": "L'appel de l'√¢me"
    },
    {
      "type": "text",
      "id": "ritual_title",
      "label": "Titre rituel",
      "default": "Ton rituel"
    },
    {
      "type": "text",
      "id": "mood_title",
      "label": "Titre m√©t√©o √©motionnelle",
      "default": "Ta m√©t√©o √©motionnelle"
    },
    {
      "type": "text",
      "id": "voyage_title",
      "label": "Titre voyage",
      "default": "Mon Voyage"
    },
    {
      "type": "header",
      "content": "√âtat vide (pas de quiz)"
    },
    {
      "type": "text",
      "id": "empty_icon",
      "label": "Ic√¥ne √©tat vide",
      "default": "‚ú®"
    },
    {
      "type": "text",
      "id": "empty_title",
      "label": "Titre √©tat vide",
      "default": "D√©couvrez votre profil √©motionnel"
    },
    {
      "type": "textarea",
      "id": "empty_text",
      "label": "Texte √©tat vide",
      "default": "Votre diagnostic r√©v√®lera la bougie et la pierre qui r√©sonnent avec votre √©nergie actuelle."
    },
    {
      "type": "text",
      "id": "empty_cta",
      "label": "CTA √©tat vide",
      "default": "Faire le diagnostic"
    },
    {
      "type": "url",
      "id": "quiz_url",
      "label": "URL du quiz"
    },
    {
      "type": "header",
      "content": "‚îÄ‚îÄ Profil Apaisement ‚îÄ‚îÄ"
    },
    {
      "type": "product",
      "id": "profile_apaisement_product",
      "label": "Produit Apaisement"
    },
    {
      "type": "text",
      "id": "profile_apaisement_mantra",
      "label": "Mantra Apaisement",
      "default": "Je peux d√©poser les armes"
    },
    {
      "type": "header",
      "content": "‚îÄ‚îÄ Profil Protection ‚îÄ‚îÄ"
    },
    {
      "type": "product",
      "id": "profile_protection_product",
      "label": "Produit Protection"
    },
    {
      "type": "text",
      "id": "profile_protection_mantra",
      "label": "Mantra Protection",
      "default": "Je prot√®ge mon √©nergie"
    },
    {
      "type": "header",
      "content": "‚îÄ‚îÄ Profil S√©r√©nit√© ‚îÄ‚îÄ"
    },
    {
      "type": "product",
      "id": "profile_serenite_product",
      "label": "Produit S√©r√©nit√©"
    },
    {
      "type": "text",
      "id": "profile_serenite_mantra",
      "label": "Mantra S√©r√©nit√©",
      "default": "Je l√¢che le contr√¥le"
    },
    {
      "type": "header",
      "content": "‚îÄ‚îÄ Profil Amour ‚îÄ‚îÄ"
    },
    {
      "type": "product",
      "id": "profile_amour_product",
      "label": "Produit Amour"
    },
    {
      "type": "text",
      "id": "profile_amour_mantra",
      "label": "Mantra Amour",
      "default": "Je m√©rite la douceur que je donne aux autres"
    },
    {
      "type": "header",
      "content": "‚îÄ‚îÄ Profil Chance ‚îÄ‚îÄ"
    },
    {
      "type": "product",
      "id": "profile_chance_product",
      "label": "Produit Chance"
    },
    {
      "type": "text",
      "id": "profile_chance_mantra",
      "label": "Mantra Chance",
      "default": "L'√©nergie suit l'intention"
    },
    {
      "type": "header",
      "content": "Tailles de texte"
    },
    {
      "type": "range",
      "id": "heading_size",
      "label": "Taille du titre principal (px)",
      "min": 20,
      "max": 48,
      "step": 1,
      "default": 24,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "body_size",
      "label": "Taille du texte corps (px)",
      "min": 12,
      "max": 20,
      "step": 1,
      "default": 14,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "Couleurs"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Couleur accent par d√©faut",
      "default": "#C0A062"
    },
    {
      "type": "header",
      "content": "Affichage"
    },
    {
      "type": "checkbox",
      "id": "show_cold_reading",
      "label": "Afficher le cold reading",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_mood_bars",
      "label": "Afficher la m√©t√©o √©motionnelle",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_voyage",
      "label": "Afficher Mon Voyage",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Milaura Dashboard"
    }
  ]
}
{% endschema %}
