{% style %}
  /* ============================================
     MILAURA TRUST BAR - Barre compacte de confiance
     ============================================ */

  #MilauraTrustBar-{{ section.id }} {
    padding: 0;
    margin: var(--milaura-spacing-sm, 12px) 0;
  }

  #MilauraTrustBar-{{ section.id }} .trust-bar-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 var(--milaura-spacing-sm, 12px);
  }

  #MilauraTrustBar-{{ section.id }} .trust-bar {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: {{ section.settings.badge_gap }}px;
    padding: 12px 24px;
    min-height: 60px;

    /* Glassmorphism lÃ©ger */
    background-color: rgba(255, 255, 255, 0.85); /* Fallback Safari iOS < 15.4 */
    background: rgba(255, 255, 255, 0.6);
    backdrop-filter: blur(15px) saturate(160%);
    -webkit-backdrop-filter: blur(15px) saturate(160%);

    /* Bordure dorÃ©e subtile */
    border: 1px solid rgba(192, 160, 98, 0.25);
    border-radius: 50px;
    box-shadow: 0 4px 20px rgba(192, 160, 98, 0.1);
  }

  #MilauraTrustBar-{{ section.id }} .trust-badge {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 12px;
    white-space: nowrap;
  }

  #MilauraTrustBar-{{ section.id }} .trust-badge-icon {
    font-size: {{ section.settings.icon_size }}px;
    line-height: 1;
    flex-shrink: 0;
  }

  #MilauraTrustBar-{{ section.id }} .trust-badge-text {
    font-family: var(--milaura-font-body, 'Lato', sans-serif);
    font-size: {{ section.settings.text_size }}px;
    font-weight: 600;
    color: {{ section.settings.text_color }};
    letter-spacing: 0.3px;
  }

  /* SÃ©parateur entre badges (optionnel) */
  {% if section.settings.show_separators %}
  #MilauraTrustBar-{{ section.id }} .trust-badge:not(:last-child)::after {
    content: '';
    display: block;
    width: 1px;
    height: 24px;
    background: rgba(192, 160, 98, 0.3);
    margin-left: 12px;
  }
  {% endif %}

  /* --- TABLETTE --- */
  @media screen and (max-width: 1024px) {
    #MilauraTrustBar-{{ section.id }} .trust-bar {
      gap: 16px;
      padding: 10px 20px;
      flex-wrap: wrap;
    }

    #MilauraTrustBar-{{ section.id }} .trust-badge {
      padding: 4px 8px;
    }

    #MilauraTrustBar-{{ section.id }} .trust-badge-text {
      font-size: calc({{ section.settings.text_size }}px * 0.9);
    }
  }

  /* --- MOBILE --- */
  @media screen and (max-width: 768px) {
    #MilauraTrustBar-{{ section.id }} {
      margin: var(--milaura-spacing-xs, 6px) 0;
    }

    #MilauraTrustBar-{{ section.id }} .trust-bar {
      flex-wrap: wrap;
      gap: 8px;
      padding: 10px 16px;
      min-height: auto;
      border-radius: 20px;
    }

    #MilauraTrustBar-{{ section.id }} .trust-badge {
      flex: 0 0 auto;
      gap: 6px;
      padding: 4px 8px;
    }

    #MilauraTrustBar-{{ section.id }} .trust-badge-icon {
      font-size: calc({{ section.settings.icon_size }}px * 0.85);
    }

    #MilauraTrustBar-{{ section.id }} .trust-badge-text {
      font-size: calc({{ section.settings.text_size }}px * 0.85);
    }

    /* Cacher sÃ©parateurs sur mobile */
    #MilauraTrustBar-{{ section.id }} .trust-badge:not(:last-child)::after {
      display: none;
    }
  }

  /* --- TRÃˆS PETIT MOBILE --- */
  @media screen and (max-width: 380px) {
    #MilauraTrustBar-{{ section.id }} .trust-bar {
      gap: 6px;
      padding: 8px 12px;
    }

    #MilauraTrustBar-{{ section.id }} .trust-badge {
      gap: 4px;
      padding: 2px 6px;
    }

    #MilauraTrustBar-{{ section.id }} .trust-badge-icon {
      font-size: calc({{ section.settings.icon_size }}px * 0.75);
    }

    #MilauraTrustBar-{{ section.id }} .trust-badge-text {
      font-size: calc({{ section.settings.text_size }}px * 0.75);
    }
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    #MilauraTrustBar-{{ section.id }} .trust-bar {
      transition: none;
    }
  }
{% endstyle %}

<section id="MilauraTrustBar-{{ section.id }}" aria-label="Garanties et engagements">
  <div class="trust-bar-container">
    <div class="trust-bar">
      {% for block in section.blocks %}
        {% if block.type == 'badge' %}
          <div class="trust-badge" {{ block.shopify_attributes }}>
            {% if block.settings.icon != blank %}
              <span class="trust-badge-icon" aria-hidden="true">{{ block.settings.icon }}</span>
            {% endif %}
            {% if block.settings.text != blank %}
              <span class="trust-badge-text">{{ block.settings.text }}</span>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Milaura Trust Bar",
  "tag": "section",
  "class": "section milaura-trust-bar",
  "enabled_on": {
    "templates": ["*"]
  },
  "settings": [
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "range",
      "id": "icon_size",
      "label": "Taille des icÃ´nes",
      "min": 14,
      "max": 28,
      "step": 1,
      "unit": "px",
      "default": 18
    },
    {
      "type": "range",
      "id": "text_size",
      "label": "Taille du texte",
      "min": 12,
      "max": 18,
      "step": 1,
      "unit": "px",
      "default": 14
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Couleur du texte",
      "default": "#1b1b1b"
    },
    {
      "type": "range",
      "id": "badge_gap",
      "label": "Espacement entre badges",
      "min": 16,
      "max": 48,
      "step": 4,
      "unit": "px",
      "default": 32
    },
    {
      "type": "checkbox",
      "id": "show_separators",
      "label": "Afficher sÃ©parateurs entre badges",
      "default": false
    }
  ],
  "blocks": [
    {
      "type": "badge",
      "name": "Badge",
      "limit": 6,
      "settings": [
        {
          "type": "text",
          "id": "icon",
          "label": "IcÃ´ne (Emoji)",
          "default": "ğŸ‡«ğŸ‡·"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Texte",
          "default": "Artisanat FranÃ§ais"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Milaura Trust Bar",
      "blocks": [
        {
          "type": "badge",
          "settings": {
            "icon": "ğŸ‡«ğŸ‡·",
            "text": "Artisanat FranÃ§ais"
          }
        },
        {
          "type": "badge",
          "settings": {
            "icon": "ğŸ’",
            "text": "Pierres CertifiÃ©es"
          }
        },
        {
          "type": "badge",
          "settings": {
            "icon": "ğŸšš",
            "text": "Livraison Offerte dÃ¨s 39â‚¬"
          }
        },
        {
          "type": "badge",
          "settings": {
            "icon": "ğŸ’",
            "text": "Emballage Cadeau"
          }
        }
      ]
    }
  ]
}
{% endschema %}
